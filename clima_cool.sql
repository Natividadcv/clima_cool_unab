-- phpMyAdmin SQL Dump
-- version 5.2.0
-- https://www.phpmyadmin.net/
--
-- Servidor: 127.0.0.1
-- Tiempo de generación: 28-10-2023 a las 20:42:59
-- Versión del servidor: 10.4.27-MariaDB
-- Versión de PHP: 8.0.25

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Base de datos: `clima_cool`
--

DELIMITER $$
--
-- Procedimientos
--
CREATE DEFINER=`root`@`localhost` PROCEDURE `calcular_ganancias` ()   BEGIN
    DECLARE ventas_totales DECIMAL(10,2);
    DECLARE costos_totales DECIMAL(10,2);
    DECLARE ganancias DECIMAL(10,2);
    
    -- Calculamos las ventas totales
    SELECT SUM(VENT_TOTAL) INTO ventas_totales
    FROM tm_venta
    WHERE EST = '1';
    
    -- Calculamos los costos totales
    SELECT SUM(PROD_PVENTA * DETV_CANT) INTO costos_totales
    FROM td_venta_detalle
    WHERE VENT_ID IN (SELECT VENT_ID FROM tm_venta WHERE EST = '1');
    
    -- Calculamos las ganancias
    SET ganancias = ventas_totales - costos_totales;
    
    -- Devolvemos el resultado
    SELECT ganancias;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `completar_instalacion` (IN `evento_id` INT)   BEGIN
  UPDATE evento
  SET instalacion_completada = 1
  WHERE id = evento_id;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `deshacer_completado` (IN `p_evento_id` INT)   BEGIN
  UPDATE evento
  SET instalacion_completada = 0
  WHERE id = p_evento_id;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `listar_estado` ()   BEGIN
    SELECT e.id, e.title, e.servicio, e.start, e.end, e.color, e.idcliente, e.direccion, e.referencia, e.instalacion_coment,e.instalacion_completada, e.est, c.CLI_NOM, c.CLI_CORREO, p.PROD_NOM
    FROM evento e
    JOIN tm_cliente c ON e.idcliente = c.CLI_ID
    JOIN tm_producto p ON e.productoId = p.PROD_ID
    WHERE e.est = 1;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `reporteVentasPorFecha` ()   BEGIN
  SELECT DATE(FECH_CREA) AS fechaVenta, SUM(VENT_TOTAL) AS totalVentas
  FROM tm_venta
  GROUP BY fechaVenta;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `reporteVentasPorUsuario` ()   BEGIN
  SELECT u.USU_NOM, v.USU_ID, SUM(v.VENT_TOTAL) AS totalVentas
  FROM tm_venta v
  INNER JOIN tm_usuario u ON v.USU_ID = u.USU_ID
  GROUP BY v.USU_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `reporte_ventas_producto` ()   BEGIN
    SELECT td.PROD_ID, tp.PROD_NOM, SUM(td.DETV_CANT) AS cantidad_vendida, SUM(td.DETV_TOTAL) AS ventas_totales
    FROM td_venta_detalle td
    INNER JOIN tm_producto tp ON td.PROD_ID = tp.PROD_ID
    GROUP BY td.PROD_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_D_CATEGORIA_01` (`p_CAT_ID` INT)   BEGIN
	UPDATE TM_CATEGORIA
	SET
		EST= 0
	WHERE
		CAT_ID = p_CAT_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_D_CLIENTE_01` (`p_CLI_ID` INT)   BEGIN
	UPDATE TM_CLIENTE
	SET
		EST= 0
	WHERE
		CLI_ID = p_CLI_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_D_COMPANIA_01` (`p_COM_ID` INT)   BEGIN
	UPDATE TM_COMPANIA
	SET
		EST= 0
	WHERE
		COM_ID = p_COM_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_D_COMPRA_01` (`p_DETC_ID` INT)   BEGIN
	UPDATE TD_COMPRA_DETALLE
	SET
		EST=0
	WHERE
		DETC_ID = p_DETC_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_D_EMPRESA_01` (`p_EMP_ID` INT)   BEGIN
	UPDATE TM_EMPRESA
	SET
		EST= 0
	WHERE
		EMP_ID = p_EMP_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_D_MONEDA_01` (`p_MON_ID` INT)   BEGIN
	UPDATE TM_MONEDA
	SET
		EST= 0
	WHERE
		MON_ID = p_MON_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_D_PRODUCTO_01` (`p_PROD_ID` INT)   BEGIN
	UPDATE TM_PRODUCTO
	SET
		EST= 0
	WHERE
		PROD_ID = p_PROD_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_D_PROVEEDOR_01` (`p_PROV_ID` INT)   BEGIN
	UPDATE TM_PROVEEDOR
	SET
		EST= 0
	WHERE
		PROV_ID = p_PROV_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_D_ROL_01` (`p_ROL_ID` INT)   BEGIN
	UPDATE TM_ROL
	SET
		EST= 0
	WHERE
		ROL_ID = p_ROL_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_D_SUCURSAL_01` (`p_SUC_ID` INT)   BEGIN
	UPDATE TM_SUCURSAL
	SET
		EST= 0
	WHERE
		SUC_ID = p_SUC_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_D_UNIDAD_01` (`p_UND_ID` INT)   BEGIN
	UPDATE TM_UNIDAD
	SET
		EST= 0
	WHERE
		UND_ID = p_UND_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_D_USUARIO_01` (`p_USU_ID` INT)   BEGIN
	UPDATE TM_USUARIO
	SET
		EST= 0
	WHERE
		USU_ID = p_USU_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_D_VENTA_01` (`p_DETV_ID` INT)   BEGIN
	UPDATE TD_VENTA_DETALLE
	SET
		EST=0
	WHERE
		DETV_ID = p_DETV_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_CAJA_01` (IN `p_fecha_apertura` DATETIME, IN `p_monto_apertura` DECIMAL(10,2))   BEGIN
  INSERT INTO caja (fecha_apertura, fecha_cierre, monto_apertura, monto_cierre)
  VALUES (NOW(), NULL, p_monto_apertura, NULL);
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_CATEGORIA_01` (`p_SUC_ID` INT, `p_CAT_NOM` VARCHAR(150))   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	INSERT INTO TM_CATEGORIA
	(SUC_ID,CAT_NOM,FECH_CREA,EST)
	VALUES
	(p_SUC_ID,p_CAT_NOM,NOW(3),1);
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_CLIENTE_01` (`p_EMP_ID` INT, `p_CLI_NOM` VARCHAR(150), `p_CLI_RUC` VARCHAR(15), `p_CLI_TELF` VARCHAR(150), `p_CLI_DIRECC` VARCHAR(150), `p_CLI_CORREO` VARCHAR(100))   BEGIN  
 -- SQLINES LICENSE FOR EVALUATION USE ONLY
 INSERT INTO TM_CLIENTE  
 (CLI_NOM,EMP_ID,CLI_RUC,CLI_TELF,CLI_DIRECC,CLI_CORREO,FECH_CREA,EST)  
 VALUES  
 (p_CLI_NOM,p_EMP_ID,p_CLI_RUC,p_CLI_TELF,p_CLI_DIRECC,p_CLI_CORREO,NOW(3),1);  
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_COMPANIA_01` (`p_COM_NOM` VARCHAR(150))   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	INSERT INTO TM_COMPANIA
	(COM_NOM,FECH_CREA,EST)
	VALUES
	(p_COM_NOM,NOW(3),1);
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_COMPRA_01` (`p_SUC_ID` INT, `p_USU_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	INSERT INTO TM_COMPRA 
	(SUC_ID,USU_ID,EST)
	VALUES
	(p_SUC_ID,p_USU_ID,2);

	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT COMPR_ID FROM TM_COMPRA WHERE COMPR_ID=LAST_INSERT_ID();
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_COMPRA_02` (`p_COMPR_ID` INT, `p_PROD_ID` INT, `p_PROD_PCOMPRA` NUMERIC(18,2), `p_DETC_CANT` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	INSERT TD_COMPRA_DETALLE
	(COMPR_ID,PROD_ID,PROD_PCOMPRA,DETC_CANT,DETC_TOTAL,FECH_CREA,EST)
	VALUES
	(p_COMPR_ID,p_PROD_ID,p_PROD_PCOMPRA,p_DETC_CANT,p_PROD_PCOMPRA * p_DETC_CANT,NOW(3),1);
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_EMPRESA_01` (`p_COM_ID` INT, `p_EMP_NOM` VARCHAR(150), `p_EMP_RUC` VARCHAR(150))   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	INSERT INTO TM_EMPRESA
	(COM_ID,EMP_NOM,EMP_RUC,FECH_CREA,EST)
	VALUES
	(p_COM_ID,p_EMP_NOM,p_EMP_RUC,NOW(3),1);
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_MENU_02` (`p_ROL_ID` INT)   BEGIN
	IF (SELECT COUNT(*) FROM TD_MENU WHERE ROL_ID=p_ROL_ID)=0
	THEN
		-- SQLINES LICENSE FOR EVALUATION USE ONLY
		INSERT INTO TD_MENU
		(MEN_ID,ROL_ID,MEND_PERMI,FECH_CREA,EST)
		(SELECT MEN_ID,p_ROL_ID,'No',NOW(3),1 FROM TM_MENU WHERE EST=1);
	ELSE
		-- SQLINES LICENSE FOR EVALUATION USE ONLY
		INSERT INTO TD_MENU
		(MEN_ID,ROL_ID,MEND_PERMI,FECH_CREA,EST)
		(SELECT MEN_ID,p_ROL_ID,'No',NOW(3),1 FROM TM_MENU WHERE EST=1 AND MEN_ID NOT IN (SELECT MEN_ID FROM TD_MENU WHERE ROL_ID=p_ROL_ID));
	END IF;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_MONEDA_01` (`p_SUC_ID` INT, `p_MON_NOM` VARCHAR(150))   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	INSERT INTO TM_MONEDA
	(SUC_ID,MON_NOM,FECH_CREA,EST)
	VALUES
	(p_SUC_ID,p_MON_NOM,NOW(3),1);
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_PRODUCTO_01` (`p_SUC_ID` INT, `p_CAT_ID` INT, `p_PROD_NOM` VARCHAR(150), `p_PROD_DESCRIP` VARCHAR(150), `p_UND_ID` INT, `p_MON_ID` INT, `p_PROD_PCOMPRA` NUMERIC(18,2), `p_PROD_PVENTA` NUMERIC(18,2), `p_PROD_STOCK` INT, `p_PROD_FECHAVEN` DATE, `p_PROD_IMG` LONGTEXT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	INSERT INTO TM_PRODUCTO
	(SUC_ID,CAT_ID,PROD_NOM,PROD_DESCRIP,UND_ID,MON_ID,PROD_PCOMPRA,PROD_PVENTA,PROD_STOCK,PROD_FECHAVEN,PROD_IMG,FECH_CREA,EST)
	VALUES
	(p_SUC_ID,p_CAT_ID,p_PROD_NOM,p_PROD_DESCRIP,p_UND_ID,p_MON_ID,p_PROD_PCOMPRA,p_PROD_PVENTA,p_PROD_STOCK,p_PROD_FECHAVEN,p_PROD_IMG,NOW(3),1);
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_PROVEEDOR_01` (`p_EMP_ID` INT, `p_PROV_NOM` VARCHAR(150), `p_PROV_RUC` VARCHAR(15), `p_PROV_TELF` VARCHAR(150), `p_PROV_DIRECC` VARCHAR(150), `p_PROV_CORREO` VARCHAR(150))   BEGIN    
 -- SQLINES LICENSE FOR EVALUATION USE ONLY
 INSERT INTO TM_PROVEEDOR    
 (EMP_ID,PROV_NOM,PROV_RUC,PROV_TELF,PROV_DIRECC,PROV_CORREO,FECH_CREA,EST)    
 VALUES    
 (p_EMP_ID,p_PROV_NOM,p_PROV_RUC,p_PROV_TELF,p_PROV_DIRECC,p_PROV_CORREO,NOW(3),1);    
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_ROL_01` (`p_SUC_ID` INT, `p_ROL_NOM` VARCHAR(150))   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	INSERT INTO TM_ROL
	(SUC_ID,ROL_NOM,FECH_CREA,EST)
	VALUES
	(p_SUC_ID,p_ROL_NOM,NOW(3),1);
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_SUCURSAL_01` (`p_EMP_ID` INT, `p_SUC_NOM` VARCHAR(150))   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	INSERT INTO TM_SUCURSAL
	(EMP_ID,SUC_NOM,FECH_CREA,EST)
	VALUES
	(p_EMP_ID,p_SUC_NOM,NOW(3),1);
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_UNIDAD_01` (`p_SUC_ID` INT, `p_UND_NOM` VARCHAR(150))   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	INSERT INTO TM_UNIDAD
	(SUC_ID,UND_NOM,FECH_CREA,EST)
	VALUES
	(p_SUC_ID,p_UND_NOM,NOW(3),1);
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_USUARIO_01` (`p_SUC_ID` INT, `p_USU_CORREO` VARCHAR(150), `p_USU_NOM` VARCHAR(150), `p_USU_APE` VARCHAR(150), `p_USU_DNI` VARCHAR(150), `p_USU_TELF` VARCHAR(150), `p_USU_PASS` VARCHAR(150), `p_ROL_ID` INT, `p_USU_IMG` LONGTEXT)   BEGIN  
 -- SQLINES LICENSE FOR EVALUATION USE ONLY
 INSERT INTO TM_USUARIO  
 (SUC_ID,USU_CORREO,USU_NOM,USU_APE,USU_DNI,USU_TELF,USU_PASS,ROL_ID,USU_IMG,FECH_CREA,EST)  
 VALUES  
 (p_SUC_ID,p_USU_CORREO,p_USU_NOM,p_USU_APE,p_USU_DNI,p_USU_TELF,p_USU_PASS,p_ROL_ID,p_USU_IMG,NOW(3),1);  
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_VENTA_01` (`p_SUC_ID` INT, `p_USU_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	INSERT INTO TM_VENTA 
	(SUC_ID,USU_ID,EST)
	VALUES
	(p_SUC_ID,p_USU_ID,2);

	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT VENT_ID FROM TM_VENTA WHERE VENT_ID=LAST_INSERT_ID();
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_VENTA_02` (`p_VENT_ID` INT, `p_PROD_ID` INT, `p_PROD_PVENTA` NUMERIC(18,2), `p_DETV_CANT` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	INSERT TD_VENTA_DETALLE
	(VENT_ID,PROD_ID,PROD_PVENTA,DETV_CANT,DETV_TOTAL,FECH_CREA,EST)
	VALUES
	(p_VENT_ID,p_PROD_ID,p_PROD_PVENTA,p_DETV_CANT,p_PROD_PVENTA * p_DETV_CANT,NOW(3),1);
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_I_VENTA_02_DESCUENTO` (IN `p_VENT_ID` INT, IN `p_PROD_ID` INT, IN `p_PROD_PVENTA` DECIMAL(18,2), IN `p_DETV_CANT` INT, IN `p_DETV_DESCUENTO` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	INSERT TD_VENTA_DETALLE
	(VENT_ID, PROD_ID, PROD_PVENTA, DETV_CANT, DETV_DESCUENTO, DETV_TOTAL, FECH_CREA, EST)
	VALUES
	(p_VENT_ID, p_PROD_ID, p_PROD_PVENTA, p_DETV_CANT, p_DETV_DESCUENTO, p_PROD_PVENTA * p_DETV_CANT, NOW(3), 1);
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_CAJA_01` ()   BEGIN
  SELECT *
  FROM caja;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_CAJA_02` (`p_caja_id` INT)   BEGIN
    SELECT * FROM caja
    WHERE caja_id = p_caja_id;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_CATEGORIA_01` (`p_SUC_ID` INT)   BEGIN  
 -- SQLINES LICENSE FOR EVALUATION USE ONLY
 SELECT 
	 CAT_ID,
	 SUC_ID,
	 CAT_NOM,
	 DATE_FORMAT(FECH_CREA,"%d-%m-%Y") AS FECH_CREA,
	 EST 
 FROM 
	TM_CATEGORIA  
 WHERE  
	 SUC_ID = p_SUC_ID  
	 AND EST=1;  
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_CATEGORIA_02` (`p_CAT_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_CATEGORIA
	WHERE
	CAT_ID = p_CAT_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_CATEGORIA_03` (`p_SUC_ID` INT)   BEGIN

	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT        
		TM_CATEGORIA.CAT_ID, 
		TM_CATEGORIA.CAT_NOM, 
		SUM(TM_PRODUCTO.PROD_STOCK) AS STOCK
	FROM            
		TM_CATEGORIA INNER JOIN
		TM_PRODUCTO ON TM_CATEGORIA.CAT_ID = TM_PRODUCTO.CAT_ID
	WHERE        
		TM_CATEGORIA.SUC_ID = 1
		AND TM_PRODUCTO.EST=1
		AND TM_CATEGORIA.EST=1
	GROUP BY
		TM_CATEGORIA.CAT_ID, 
		TM_CATEGORIA.CAT_NOM
	ORDER BY
		STOCK DESC;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_CLIENTE_01` (`p_EMP_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_CLIENTE
	WHERE
	EMP_ID = p_EMP_ID
	AND EST=1;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_CLIENTE_02` (`p_CLI_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_CLIENTE
	WHERE
	CLI_ID = p_CLI_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_COMPANIA_01` ()   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_COMPANIA
	WHERE
	EST=1;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_COMPANIA_02` (`p_COM_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_COMPANIA
	WHERE
	COM_ID = p_COM_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_COMPRAS_04` (`p_SUC_ID` INT)   BEGIN  
 -- SQLINES LICENSE FOR EVALUATION USE ONLY
 SELECT          
 TD_COMPRA_DETALLE.PROD_ID,   
 SUM(TD_COMPRA_DETALLE.DETC_CANT) AS CANT,   
 TM_PRODUCTO.PROD_NOM,   
 TM_PRODUCTO.PROD_PCOMPRA,   
 TM_CATEGORIA.CAT_NOM,   
 TM_UNIDAD.UND_NOM,   
 TM_PRODUCTO.PROD_STOCK,   
 TM_PRODUCTO.PROD_IMG,  
 TM_MONEDA.MON_NOM,  
 SUM(TM_COMPRA.COMPR_TOTAL) AS TOTAL  
 FROM              
 TD_COMPRA_DETALLE INNER JOIN  
 TM_PRODUCTO ON TD_COMPRA_DETALLE.PROD_ID = TM_PRODUCTO.PROD_ID INNER JOIN  
 TM_CATEGORIA ON TM_PRODUCTO.CAT_ID = TM_CATEGORIA.CAT_ID INNER JOIN  
 TM_UNIDAD ON TM_PRODUCTO.UND_ID = TM_UNIDAD.UND_ID INNER JOIN  
 TM_COMPRA ON TD_COMPRA_DETALLE.COMPR_ID = TM_COMPRA.COMPR_ID INNER JOIN  
 TM_MONEDA ON TM_COMPRA.MON_ID = TM_MONEDA.MON_ID  
 WHERE  
 TM_COMPRA.EST = 1  
 AND TM_PRODUCTO.EST=1  
 AND TM_COMPRA.SUC_ID = p_SUC_ID  
 GROUP BY   
 TD_COMPRA_DETALLE.PROD_ID,   
 TM_PRODUCTO.PROD_NOM,   
 TM_PRODUCTO.PROD_PCOMPRA,   
 TM_CATEGORIA.CAT_NOM,   
 TM_UNIDAD.UND_NOM,   
 TM_PRODUCTO.PROD_STOCK,   
 TM_PRODUCTO.PROD_IMG,  
 TM_MONEDA.MON_NOM  
 ORDER BY CANT DESC
 LIMIT 5;  
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_COMPRAVENTA_01` (IN `p_SUC_ID` INT)   BEGIN
-- SQLINES LICENSE FOR EVALUATION USE ONLY
SELECT * FROM 
	(
		SELECT              
		TM_COMPRA.COMPR_ID,       
		TM_COMPRA.SUC_ID,       
		TM_COMPRA.PAG_ID,       
		TM_COMPRA.PROV_ID,       
		TM_COMPRA.PROV_RUC,       
		TM_COMPRA.PROV_DIRECC,       
		TM_COMPRA.PROV_CORREO,       
		TM_COMPRA.COMPR_SUBTOTAL,       
		TM_COMPRA.COMPR_IGV,       
		TM_COMPRA.COMPR_TOTAL,       
		TM_COMPRA.COMPR_COMENT,       
		TM_COMPRA.USU_ID,       
		TM_COMPRA.MON_ID,       
		DATE_FORMAT(TM_COMPRA.FECH_CREA,'%Y-%m-%d') AS FECH_CREA,       
		TM_COMPRA.EST,       
		TM_SUCURSAL.SUC_NOM,       
		TM_EMPRESA.EMP_NOM,       
		TM_EMPRESA.EMP_RUC,       
		TM_EMPRESA.EMP_CORREO,       
		TM_EMPRESA.EMP_TELF,       
		TM_EMPRESA.EMP_DIRECC,       
		TM_EMPRESA.EMP_PAG,       
		TM_COMPANIA.COM_NOM,       
		TM_USUARIO.USU_CORREO,       
		TM_USUARIO.USU_NOM,       
		TM_USUARIO.USU_APE,       
		TM_USUARIO.USU_DNI,       
		TM_USUARIO.USU_TELF,     
		TM_USUARIO.USU_IMG,    
		TM_ROL.ROL_NOM,       
		TM_PAGO.PAG_NOM,       
		TM_MONEDA.MON_NOM,      
		TM_PROVEEDOR.PROV_NOM,  
		TM_DOCUMENTO.DOC_NOM,
		'Compra' as REGISTRO
		FROM                  
		TM_COMPRA INNER JOIN      
		TM_SUCURSAL ON TM_COMPRA.SUC_ID = TM_SUCURSAL.SUC_ID INNER JOIN      
		TM_EMPRESA ON TM_SUCURSAL.EMP_ID = TM_EMPRESA.EMP_ID INNER JOIN      
		TM_COMPANIA ON TM_EMPRESA.COM_ID = TM_COMPANIA.COM_ID INNER JOIN      
		TM_USUARIO ON TM_COMPRA.USU_ID = TM_USUARIO.USU_ID INNER JOIN      
		TM_ROL ON TM_USUARIO.ROL_ID = TM_ROL.ROL_ID INNER JOIN      
		TM_PAGO ON TM_COMPRA.PAG_ID = TM_PAGO.PAG_ID INNER JOIN      
		TM_MONEDA ON TM_COMPRA.MON_ID = TM_MONEDA.MON_ID INNER JOIN      
		TM_PROVEEDOR ON TM_COMPRA.PROV_ID = TM_PROVEEDOR.PROV_ID INNER JOIN  
		TM_DOCUMENTO ON TM_COMPRA.DOC_ID = TM_DOCUMENTO.DOC_ID  
		WHERE      
		TM_COMPRA.EST=1      
		AND TM_COMPRA.SUC_ID = p_SUC_ID

		UNION ALL
      
		SELECT                
		TM_VENTA.VENT_ID,         
		TM_VENTA.SUC_ID,         
		TM_VENTA.PAG_ID,         
		TM_VENTA.CLI_ID,         
		TM_VENTA.CLI_RUC,         
		TM_VENTA.CLI_DIRECC,         
		TM_VENTA.CLI_CORREO,         
		TM_VENTA.VENT_SUBTOTAL,         
		TM_VENTA.VENT_IGV,         
		TM_VENTA.VENT_TOTAL,         
		TM_VENTA.VENT_COMENT,         
		TM_VENTA.USU_ID,         
		TM_VENTA.MON_ID,         
		DATE_FORMAT(TM_VENTA.FECH_CREA,'%Y-%m-%d') AS FECH_CREA_VENTA,    
		TM_VENTA.EST,         
		TM_SUCURSAL.SUC_NOM,         
		TM_EMPRESA.EMP_NOM,         
		TM_EMPRESA.EMP_RUC,         
		TM_EMPRESA.EMP_CORREO,         
		TM_EMPRESA.EMP_TELF,         
		TM_EMPRESA.EMP_DIRECC,         
		TM_EMPRESA.EMP_PAG,         
		TM_COMPANIA.COM_NOM,         
		TM_USUARIO.USU_CORREO,         
		TM_USUARIO.USU_NOM,         
		TM_USUARIO.USU_APE,         
		TM_USUARIO.USU_DNI,         
		TM_USUARIO.USU_TELF,         
		TM_USUARIO.USU_IMG,     
		TM_ROL.ROL_NOM,         
		TM_PAGO.PAG_NOM,         
		TM_MONEDA.MON_NOM,        
		TM_CLIENTE.CLI_NOM,  
		TM_DOCUMENTO.DOC_NOM,
		'Venta' AS REGISTRO
		FROM                    
		TM_VENTA INNER JOIN        
		TM_SUCURSAL ON TM_VENTA.SUC_ID = TM_SUCURSAL.SUC_ID INNER JOIN        
		TM_EMPRESA ON TM_SUCURSAL.EMP_ID = TM_EMPRESA.EMP_ID INNER JOIN        
		TM_COMPANIA ON TM_EMPRESA.COM_ID = TM_COMPANIA.COM_ID INNER JOIN        
		TM_USUARIO ON TM_VENTA.USU_ID = TM_USUARIO.USU_ID INNER JOIN        
		TM_ROL ON TM_USUARIO.ROL_ID = TM_ROL.ROL_ID INNER JOIN        
		TM_PAGO ON TM_VENTA.PAG_ID = TM_PAGO.PAG_ID INNER JOIN        
		TM_MONEDA ON TM_VENTA.MON_ID = TM_MONEDA.MON_ID INNER JOIN        
		TM_CLIENTE ON TM_VENTA.CLI_ID = TM_CLIENTE.CLI_ID INNER JOIN  
		TM_DOCUMENTO ON TM_VENTA.DOC_ID = TM_DOCUMENTO.DOC_ID  
		WHERE        
		TM_VENTA.EST=1        
		AND TM_VENTA.SUC_ID = p_SUC_ID  
	) TABLA
ORDER BY FECH_CREA DESC
LIMIT 20;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_COMPRA_01` (`p_COMPR_ID` INT)   BEGIN  
 -- SQLINES LICENSE FOR EVALUATION USE ONLY
 SELECT          
 TD_COMPRA_DETALLE.DETC_ID,   
 TM_CATEGORIA.CAT_NOM,   
 TM_PRODUCTO.PROD_NOM,
 TM_PRODUCTO.PROD_IMG,
 TM_UNIDAD.UND_NOM,   
 TD_COMPRA_DETALLE.PROD_PCOMPRA,  
 TD_COMPRA_DETALLE.DETC_CANT,   
 TD_COMPRA_DETALLE.DETC_TOTAL,   
 TD_COMPRA_DETALLE.COMPR_ID,   
 TD_COMPRA_DETALLE.PROD_ID  
 FROM              
 TD_COMPRA_DETALLE INNER JOIN  
 TM_PRODUCTO ON TD_COMPRA_DETALLE.PROD_ID = TM_PRODUCTO.PROD_ID INNER JOIN  
 TM_CATEGORIA ON TM_PRODUCTO.CAT_ID = TM_CATEGORIA.CAT_ID INNER JOIN  
 TM_UNIDAD ON TM_PRODUCTO.UND_ID = TM_UNIDAD.UND_ID  
 WHERE  
 TD_COMPRA_DETALLE.COMPR_ID = p_COMPR_ID  
 AND TD_COMPRA_DETALLE.EST=1;  
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_COMPRA_02` (`p_COMPR_ID` INT)   BEGIN
-- SQLINES LICENSE FOR EVALUATION USE ONLY
SELECT        
TM_COMPRA.COMPR_ID, 
TM_COMPRA.SUC_ID, 
TM_COMPRA.PAG_ID, 
TM_COMPRA.PROV_ID, 
TM_COMPRA.PROV_RUC, 
TM_COMPRA.PROV_DIRECC, 
TM_COMPRA.PROV_CORREO, 
TM_COMPRA.COMPR_SUBTOTAL, 
TM_COMPRA.COMPR_IGV, 
TM_COMPRA.COMPR_TOTAL, 
TM_COMPRA.COMPR_COMENT, 
TM_COMPRA.USU_ID, 
TM_COMPRA.MON_ID, 
TM_COMPRA.FECH_CREA, 
TM_COMPRA.EST, 
TM_SUCURSAL.SUC_NOM, 
TM_EMPRESA.EMP_NOM, 
TM_EMPRESA.EMP_RUC, 
TM_EMPRESA.EMP_CORREO, 
TM_EMPRESA.EMP_TELF, 
TM_EMPRESA.EMP_DIRECC, 
TM_EMPRESA.EMP_PAG, 
TM_COMPANIA.COM_NOM, 
TM_USUARIO.USU_CORREO, 
TM_USUARIO.USU_NOM, 
TM_USUARIO.USU_APE, 
TM_USUARIO.USU_DNI, 
TM_USUARIO.USU_TELF, 
TM_ROL.ROL_NOM, 
TM_PAGO.PAG_NOM, 
TM_MONEDA.MON_NOM,
TM_PROVEEDOR.PROV_NOM
FROM            
TM_COMPRA INNER JOIN
TM_SUCURSAL ON TM_COMPRA.SUC_ID = TM_SUCURSAL.SUC_ID INNER JOIN
TM_EMPRESA ON TM_SUCURSAL.EMP_ID = TM_EMPRESA.EMP_ID INNER JOIN
TM_COMPANIA ON TM_EMPRESA.COM_ID = TM_COMPANIA.COM_ID INNER JOIN
TM_USUARIO ON TM_COMPRA.USU_ID = TM_USUARIO.USU_ID INNER JOIN
TM_ROL ON TM_USUARIO.ROL_ID = TM_ROL.ROL_ID INNER JOIN
TM_PAGO ON TM_COMPRA.PAG_ID = TM_PAGO.PAG_ID INNER JOIN
TM_MONEDA ON TM_COMPRA.MON_ID = TM_MONEDA.MON_ID INNER JOIN
TM_PROVEEDOR ON TM_COMPRA.PROV_ID = TM_PROVEEDOR.PROV_ID
WHERE  
TM_COMPRA.COMPR_ID = p_COMPR_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_COMPRA_03` (`p_SUC_ID` INT)   BEGIN    
 -- SQLINES LICENSE FOR EVALUATION USE ONLY
 SELECT            
 TM_COMPRA.COMPR_ID,     
 TM_COMPRA.SUC_ID,     
 TM_COMPRA.PAG_ID,     
 TM_COMPRA.PROV_ID,     
 TM_COMPRA.PROV_RUC,     
 TM_COMPRA.PROV_DIRECC,     
 TM_COMPRA.PROV_CORREO,     
 TM_COMPRA.COMPR_SUBTOTAL,     
 TM_COMPRA.COMPR_IGV,     
 TM_COMPRA.COMPR_TOTAL,     
 TM_COMPRA.COMPR_COMENT,     
 TM_COMPRA.USU_ID,     
 TM_COMPRA.MON_ID,     
 TM_COMPRA.FECH_CREA,     
 TM_COMPRA.EST,     
 TM_SUCURSAL.SUC_NOM,     
 TM_EMPRESA.EMP_NOM,     
 TM_EMPRESA.EMP_RUC,     
 TM_EMPRESA.EMP_CORREO,     
 TM_EMPRESA.EMP_TELF,     
 TM_EMPRESA.EMP_DIRECC,     
 TM_EMPRESA.EMP_PAG,     
 TM_COMPANIA.COM_NOM,     
 TM_USUARIO.USU_CORREO,     
 TM_USUARIO.USU_NOM,     
 TM_USUARIO.USU_APE,     
 TM_USUARIO.USU_DNI,     
 TM_USUARIO.USU_TELF,   
 TM_USUARIO.USU_IMG,  
 TM_ROL.ROL_NOM,     
 TM_PAGO.PAG_NOM,     
 TM_MONEDA.MON_NOM,    
 TM_PROVEEDOR.PROV_NOM,
 TM_DOCUMENTO.DOC_NOM
 FROM                
 TM_COMPRA INNER JOIN    
 TM_SUCURSAL ON TM_COMPRA.SUC_ID = TM_SUCURSAL.SUC_ID INNER JOIN    
 TM_EMPRESA ON TM_SUCURSAL.EMP_ID = TM_EMPRESA.EMP_ID INNER JOIN    
 TM_COMPANIA ON TM_EMPRESA.COM_ID = TM_COMPANIA.COM_ID INNER JOIN    
 TM_USUARIO ON TM_COMPRA.USU_ID = TM_USUARIO.USU_ID INNER JOIN    
 TM_ROL ON TM_USUARIO.ROL_ID = TM_ROL.ROL_ID INNER JOIN    
 TM_PAGO ON TM_COMPRA.PAG_ID = TM_PAGO.PAG_ID INNER JOIN    
 TM_MONEDA ON TM_COMPRA.MON_ID = TM_MONEDA.MON_ID INNER JOIN    
 TM_PROVEEDOR ON TM_COMPRA.PROV_ID = TM_PROVEEDOR.PROV_ID INNER JOIN
 TM_DOCUMENTO ON TM_COMPRA.DOC_ID = TM_DOCUMENTO.DOC_ID
 WHERE    
 TM_COMPRA.EST=1    
 AND TM_COMPRA.SUC_ID = p_SUC_ID;    
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_COMPRA_04` (`p_SUC_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT        
	TM_CATEGORIA.CAT_NOM, 
	SUM(TD_COMPRA_DETALLE.DETC_CANT) AS CANT
	FROM            
	TM_COMPRA INNER JOIN
	TD_COMPRA_DETALLE ON TM_COMPRA.COMPR_ID = TD_COMPRA_DETALLE.COMPR_ID INNER JOIN
	TM_PRODUCTO ON TD_COMPRA_DETALLE.PROD_ID = TM_PRODUCTO.PROD_ID INNER JOIN
	TM_CATEGORIA ON TM_PRODUCTO.CAT_ID = TM_CATEGORIA.CAT_ID
	WHERE        
	TM_COMPRA.EST = 1
	AND TM_COMPRA.SUC_ID = p_SUC_ID
	GROUP BY CAT_NOM
	ORDER BY CANT DESC;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_COMPRA_05` (`p_SUC_ID` INT)   BEGIN        
 -- SQLINES LICENSE FOR EVALUATION USE ONLY
 SELECT              
 TM_COMPRA.COMPR_ID,         
 TM_COMPRA.SUC_ID,         
 TM_COMPRA.PAG_ID,         
 TM_COMPRA.PROV_ID,         
 TM_COMPRA.PROV_RUC,         
 TM_COMPRA.PROV_DIRECC,         
 TM_COMPRA.PROV_CORREO,         
 TM_COMPRA.COMPR_SUBTOTAL,         
 TM_COMPRA.COMPR_IGV,         
 TM_COMPRA.COMPR_TOTAL,         
 TM_COMPRA.COMPR_COMENT,         
 TM_COMPRA.USU_ID,         
 TM_COMPRA.MON_ID,         
 TM_COMPRA.FECH_CREA,         
 TM_COMPRA.EST,         
 TM_SUCURSAL.SUC_NOM,         
 TM_EMPRESA.EMP_NOM,         
 TM_EMPRESA.EMP_RUC,         
 TM_EMPRESA.EMP_CORREO,         
 TM_EMPRESA.EMP_TELF,         
 TM_EMPRESA.EMP_DIRECC,         
 TM_EMPRESA.EMP_PAG,         
 TM_COMPANIA.COM_NOM,         
 TM_USUARIO.USU_CORREO,         
 TM_USUARIO.USU_NOM,         
 TM_USUARIO.USU_APE,         
 TM_USUARIO.USU_DNI,         
 TM_USUARIO.USU_TELF,       
 TM_USUARIO.USU_IMG,      
 TM_ROL.ROL_NOM,         
 TM_PAGO.PAG_NOM,         
 TM_MONEDA.MON_NOM,        
 TM_PROVEEDOR.PROV_NOM,    
 TM_DOCUMENTO.DOC_NOM    
 FROM                    
 TM_COMPRA INNER JOIN        
 TM_SUCURSAL ON TM_COMPRA.SUC_ID = TM_SUCURSAL.SUC_ID INNER JOIN        
 TM_EMPRESA ON TM_SUCURSAL.EMP_ID = TM_EMPRESA.EMP_ID INNER JOIN        
 TM_COMPANIA ON TM_EMPRESA.COM_ID = TM_COMPANIA.COM_ID INNER JOIN        
 TM_USUARIO ON TM_COMPRA.USU_ID = TM_USUARIO.USU_ID INNER JOIN        
 TM_ROL ON TM_USUARIO.ROL_ID = TM_ROL.ROL_ID INNER JOIN        
 TM_PAGO ON TM_COMPRA.PAG_ID = TM_PAGO.PAG_ID INNER JOIN        
 TM_MONEDA ON TM_COMPRA.MON_ID = TM_MONEDA.MON_ID INNER JOIN        
 TM_PROVEEDOR ON TM_COMPRA.PROV_ID = TM_PROVEEDOR.PROV_ID INNER JOIN    
 TM_DOCUMENTO ON TM_COMPRA.DOC_ID = TM_DOCUMENTO.DOC_ID    
 WHERE        
 TM_COMPRA.EST=1        
 AND TM_COMPRA.SUC_ID = p_SUC_ID      
 ORDER BY COMPR_ID DESC
 LIMIT 6;  
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_COMPRA_06` (`p_SUC_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT 
	DATE_FORMAT(FECH_CREA,'%d/%m/%Y') AS FECH_CREA,
	SUM(COMPR_TOTAL) AS COMPR_TOTAL
	FROM TM_COMPRA 
	WHERE 
	EST=1
	AND SUC_ID = p_SUC_ID
	GROUP BY 
	DATE_FORMAT(FECH_CREA,'%d/%m/%Y');
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_DOCUMENTO_01` (`p_DOC_TIPO` VARCHAR(150))   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_DOCUMENTO
	WHERE 
	EST=1
	AND DOC_TIPO = p_DOC_TIPO;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_EMPRESA_01` (`p_COM_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_EMPRESA
	WHERE
	COM_ID = p_COM_ID
	AND EST=1;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_EMPRESA_02` (`p_EMP_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_EMPRESA
	WHERE
	EMP_ID = p_EMP_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_MENU_01` (`p_ROL_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT        
	TD_MENU.MEND_ID, 
	TD_MENU.MEN_ID, 
	TD_MENU.ROL_ID, 
	TD_MENU.MEND_PERMI, 
	TD_MENU.FECH_CREA, 
	TD_MENU.EST, 
	TM_MENU.MEN_NOM, 
	TM_MENU.MEN_RUTA, 
	TM_MENU.MEN_IDENTI,
	TM_MENU.MEN_GRUPO
	FROM            
	TD_MENU INNER JOIN
	TM_MENU ON TD_MENU.MEN_ID = TM_MENU.MEN_ID
	WHERE 
	TD_MENU.ROL_ID = p_ROL_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_MENU_03` (`p_USU_ID` INT, `p_MEN_IDENTI` VARCHAR(100))   BEGIN  
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT        
	TD_MENU.MEND_ID, 
	TD_MENU.MEN_ID, 
	TD_MENU.ROL_ID, 
	TD_MENU.MEND_PERMI, 
	TD_MENU.FECH_CREA, 
	TD_MENU.EST, 
	TM_MENU.MEN_NOM, 
	TM_MENU.MEN_RUTA, 
	TM_MENU.MEN_IDENTI, 
	TM_MENU.MEN_GRUPO, 
	TM_USUARIO.USU_ID, 
	TM_ROL.ROL_NOM
	FROM            
	TD_MENU INNER JOIN
	TM_MENU ON TD_MENU.MEN_ID = TM_MENU.MEN_ID INNER JOIN
	TM_ROL ON TD_MENU.ROL_ID = TM_ROL.ROL_ID INNER JOIN
	TM_USUARIO ON TM_ROL.ROL_ID = TM_USUARIO.ROL_ID
 WHERE   
	TM_USUARIO.USU_ID=1  
	AND MEND_PERMI ='Si'
	AND TM_MENU.MEN_IDENTI = 'mntsucursal';
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_MONEDA_01` (`p_SUC_ID` INT)   BEGIN  
 -- SQLINES LICENSE FOR EVALUATION USE ONLY
 SELECT 
 MON_ID,
 SUC_ID,
 MON_NOM,
 DATE_FORMAT(FECH_CREA,'%d/%m/%Y') AS FECH_CREA,
 EST
 FROM TM_MONEDA  
 WHERE  
 SUC_ID = p_SUC_ID  
 AND EST=1;  
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_MONEDA_02` (`p_MON_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_MONEDA
	WHERE
	MON_ID = p_MON_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_PAGO_01` ()   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_PAGO WHERE EST=1;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_PRODUCTO_01` (`p_SUC_ID` INT)   BEGIN  
-- SQLINES LICENSE FOR EVALUATION USE ONLY
SELECT        
TM_PRODUCTO.PROD_ID, 
TM_PRODUCTO.SUC_ID, 
TM_PRODUCTO.CAT_ID, 
TM_PRODUCTO.PROD_NOM, 
TM_PRODUCTO.PROD_DESCRIP, 
TM_PRODUCTO.UND_ID, 
TM_PRODUCTO.MON_ID, 
TM_PRODUCTO.PROD_PCOMPRA, 
TM_PRODUCTO.PROD_PVENTA, 
TM_PRODUCTO.PROD_STOCK, 
TM_PRODUCTO.PROD_FECHAVEN, 
TM_PRODUCTO.PROD_IMG, 
TM_PRODUCTO.FECH_CREA, 
TM_PRODUCTO.EST, 
TM_CATEGORIA.CAT_NOM, 
TM_MONEDA.MON_NOM, 
TM_UNIDAD.UND_NOM
FROM            
TM_PRODUCTO INNER JOIN
TM_CATEGORIA ON TM_PRODUCTO.CAT_ID = TM_CATEGORIA.CAT_ID INNER JOIN
TM_MONEDA ON TM_PRODUCTO.MON_ID = TM_MONEDA.MON_ID INNER JOIN
TM_UNIDAD ON TM_PRODUCTO.UND_ID = TM_UNIDAD.UND_ID
 WHERE  
 TM_PRODUCTO.SUC_ID = p_SUC_ID  
 AND TM_PRODUCTO.EST=1;  
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_PRODUCTO_02` (`p_PROD_ID` INT)   BEGIN  
 -- SQLINES LICENSE FOR EVALUATION USE ONLY
 SELECT          
TM_PRODUCTO.PROD_ID,   
TM_PRODUCTO.SUC_ID,   
TM_PRODUCTO.CAT_ID,   
TM_PRODUCTO.PROD_NOM,   
TM_PRODUCTO.PROD_DESCRIP,   
TM_PRODUCTO.UND_ID,   
TM_PRODUCTO.MON_ID,   
TM_PRODUCTO.PROD_PCOMPRA,   
TM_PRODUCTO.PROD_PVENTA,   
TM_PRODUCTO.PROD_STOCK,   
TM_PRODUCTO.PROD_FECHAVEN,   
TM_PRODUCTO.PROD_IMG,   
TM_PRODUCTO.FECH_CREA,   
TM_PRODUCTO.EST,   
TM_CATEGORIA.CAT_NOM,   
TM_MONEDA.MON_NOM,   
TM_UNIDAD.UND_NOM  
FROM              
TM_PRODUCTO INNER JOIN  
TM_CATEGORIA ON TM_PRODUCTO.CAT_ID = TM_CATEGORIA.CAT_ID INNER JOIN  
TM_MONEDA ON TM_PRODUCTO.MON_ID = TM_MONEDA.MON_ID INNER JOIN  
TM_UNIDAD ON TM_PRODUCTO.UND_ID = TM_UNIDAD.UND_ID  
 WHERE  
 TM_PRODUCTO.PROD_ID = p_PROD_ID;  
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_PRODUCTO_03` (`p_CAT_ID` INT)   BEGIN    
-- SQLINES LICENSE FOR EVALUATION USE ONLY
SELECT          
TM_PRODUCTO.PROD_ID,   
TM_PRODUCTO.SUC_ID,   
TM_PRODUCTO.CAT_ID,   
TM_PRODUCTO.PROD_NOM,   
TM_PRODUCTO.PROD_DESCRIP,   
TM_PRODUCTO.UND_ID,   
TM_PRODUCTO.MON_ID,   
TM_PRODUCTO.PROD_PCOMPRA,   
TM_PRODUCTO.PROD_PVENTA,   
TM_PRODUCTO.PROD_STOCK,   
TM_PRODUCTO.PROD_FECHAVEN,   
TM_PRODUCTO.PROD_IMG,   
TM_PRODUCTO.FECH_CREA,   
TM_PRODUCTO.EST,   
TM_CATEGORIA.CAT_NOM,   
TM_MONEDA.MON_NOM,   
TM_UNIDAD.UND_NOM  
FROM              
TM_PRODUCTO INNER JOIN  
TM_CATEGORIA ON TM_PRODUCTO.CAT_ID = TM_CATEGORIA.CAT_ID INNER JOIN  
TM_MONEDA ON TM_PRODUCTO.MON_ID = TM_MONEDA.MON_ID INNER JOIN  
TM_UNIDAD ON TM_PRODUCTO.UND_ID = TM_UNIDAD.UND_ID  
 WHERE    
 TM_PRODUCTO.CAT_ID = p_CAT_ID    
 AND TM_PRODUCTO.EST=1;     
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_PRODUCTO_05` (`p_PROD_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM 
	(
		SELECT        
		TM_COMPRA.COMPR_ID, 
		DATE_FORMAT(TM_COMPRA.FECH_CREA,'%d/%m/%Y') AS FECH_CREA,
		TD_COMPRA_DETALLE.DETC_CANT, 
		TD_COMPRA_DETALLE.PROD_ID, 
		TM_DOCUMENTO.DOC_NOM,
		'Compra' as REGISTRO
		FROM            
		TM_COMPRA INNER JOIN
		TD_COMPRA_DETALLE ON TM_COMPRA.COMPR_ID = TD_COMPRA_DETALLE.COMPR_ID INNER JOIN
		TM_DOCUMENTO ON TM_COMPRA.DOC_ID = TM_DOCUMENTO.DOC_ID
		WHERE        
		TM_COMPRA.EST = 1 
		AND TD_COMPRA_DETALLE.PROD_ID = p_PROD_ID

		UNION ALL

		SELECT        
		TM_VENTA.VENT_ID, 
		DATE_FORMAT(TM_VENTA.FECH_CREA,'%d/%m/%Y') AS FECH_CREA,
		TD_VENTA_DETALLE.DETV_CANT, 
		TD_VENTA_DETALLE.PROD_ID, 
		TM_DOCUMENTO.DOC_NOM,
		'Venta' as REGISTRO
		FROM            
		TM_VENTA INNER JOIN
		TD_VENTA_DETALLE ON TM_VENTA.VENT_ID = TD_VENTA_DETALLE.VENT_ID INNER JOIN
		TM_DOCUMENTO ON TM_VENTA.DOC_ID = TM_DOCUMENTO.DOC_ID
		WHERE        
		TM_VENTA.EST = 1 
		AND TD_VENTA_DETALLE.PROD_ID = p_PROD_ID
	) TABLA 
	ORDER BY 
	FECH_CREA DESC;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_PROVEEDOR_01` (`p_EMP_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_PROVEEDOR
	WHERE
	EMP_ID = p_EMP_ID
	AND EST=1;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_PROVEEDOR_02` (`p_PROV_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_PROVEEDOR
	WHERE
	PROV_ID = p_PROV_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_REPORTE_COMPRA_01` ()   BEGIN    
 -- SQLINES LICENSE FOR EVALUATION USE ONLY
 SELECT            
 TM_COMPRA.COMPR_ID,           
 TM_COMPRA.PROV_RUC,     
 TM_COMPRA.PROV_DIRECC,     
 TM_COMPRA.PROV_CORREO,     
 TM_COMPRA.COMPR_SUBTOTAL,     
 TM_COMPRA.COMPR_IGV,     
 TM_COMPRA.COMPR_TOTAL,     
 TM_COMPRA.COMPR_COMENT,     
 TM_COMPRA.USU_ID,     
 TM_COMPRA.MON_ID,       
 DATE_FORMAT(TM_COMPRA.FECH_CREA,"%d-%m-%Y") AS FECH_CREA, 
 TM_SUCURSAL.SUC_NOM,     
 TM_EMPRESA.EMP_NOM,     
 TM_EMPRESA.EMP_RUC,     
 TM_EMPRESA.EMP_CORREO,     
 TM_EMPRESA.EMP_TELF,     
 TM_EMPRESA.EMP_DIRECC,     
 TM_EMPRESA.EMP_PAG,     
 TM_COMPANIA.COM_NOM,     
 TM_USUARIO.USU_CORREO,     
 TM_USUARIO.USU_NOM,     
 TM_USUARIO.USU_APE,     
 TM_USUARIO.USU_DNI,     
 TM_USUARIO.USU_TELF,   
 TM_USUARIO.USU_IMG,  
 TM_ROL.ROL_NOM,     
 TM_PAGO.PAG_NOM,     
 TM_MONEDA.MON_NOM,    
 TM_PROVEEDOR.PROV_NOM,
 TM_DOCUMENTO.DOC_NOM
 FROM                
 TM_COMPRA INNER JOIN    
 TM_SUCURSAL ON TM_COMPRA.SUC_ID = TM_SUCURSAL.SUC_ID INNER JOIN    
 TM_EMPRESA ON TM_SUCURSAL.EMP_ID = TM_EMPRESA.EMP_ID INNER JOIN    
 TM_COMPANIA ON TM_EMPRESA.COM_ID = TM_COMPANIA.COM_ID INNER JOIN    
 TM_USUARIO ON TM_COMPRA.USU_ID = TM_USUARIO.USU_ID INNER JOIN    
 TM_ROL ON TM_USUARIO.ROL_ID = TM_ROL.ROL_ID INNER JOIN    
 TM_PAGO ON TM_COMPRA.PAG_ID = TM_PAGO.PAG_ID INNER JOIN    
 TM_MONEDA ON TM_COMPRA.MON_ID = TM_MONEDA.MON_ID INNER JOIN    
 TM_PROVEEDOR ON TM_COMPRA.PROV_ID = TM_PROVEEDOR.PROV_ID INNER JOIN
 TM_DOCUMENTO ON TM_COMPRA.DOC_ID = TM_DOCUMENTO.DOC_ID
 WHERE    
 TM_COMPRA.EST=1;    
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_REPORTE_VENTA_01` ()   BEGIN      
 SELECT              
 TM_VENTA.VENT_ID,       
 TM_VENTA.SUC_ID,       
 TM_VENTA.PAG_ID,       
 TM_VENTA.CLI_ID,       
 TM_VENTA.CLI_RUC,       
 TM_VENTA.CLI_DIRECC,       
 TM_VENTA.CLI_CORREO,       
 TM_VENTA.VENT_SUBTOTAL,       
 TM_VENTA.VENT_IGV,       
 TM_VENTA.VENT_TOTAL,       
 TM_VENTA.VENT_COMENT,       
 TM_VENTA.USU_ID,       
 TM_VENTA.MON_ID,       
  DATE_FORMAT(TM_VENTA.FECH_CREA,"%d-%m-%Y") AS FECH_CREA,
 TM_VENTA.EST,       
 TM_SUCURSAL.SUC_NOM,       
 TM_EMPRESA.EMP_NOM,       
 TM_EMPRESA.EMP_RUC,       
 TM_EMPRESA.EMP_CORREO,       
 TM_EMPRESA.EMP_TELF,       
 TM_EMPRESA.EMP_DIRECC,       
 TM_EMPRESA.EMP_PAG,       
 TM_COMPANIA.COM_NOM,       
 TM_USUARIO.USU_CORREO,       
 TM_USUARIO.USU_NOM,       
 TM_USUARIO.USU_APE,       
 TM_USUARIO.USU_DNI,       
 TM_USUARIO.USU_TELF,       
 TM_USUARIO.USU_IMG,   
 TM_ROL.ROL_NOM,       
 TM_PAGO.PAG_NOM,       
 TM_MONEDA.MON_NOM,      
 TM_CLIENTE.CLI_NOM,
 TM_DOCUMENTO.DOC_NOM,
 TM_DOCUMENTO.DOC_TIPO
 FROM                  
 TM_VENTA INNER JOIN      
 TM_SUCURSAL ON TM_VENTA.SUC_ID = TM_SUCURSAL.SUC_ID INNER JOIN      
 TM_EMPRESA ON TM_SUCURSAL.EMP_ID = TM_EMPRESA.EMP_ID INNER JOIN      
 TM_COMPANIA ON TM_EMPRESA.COM_ID = TM_COMPANIA.COM_ID INNER JOIN      
 TM_USUARIO ON TM_VENTA.USU_ID = TM_USUARIO.USU_ID INNER JOIN      
 TM_ROL ON TM_USUARIO.ROL_ID = TM_ROL.ROL_ID INNER JOIN      
 TM_PAGO ON TM_VENTA.PAG_ID = TM_PAGO.PAG_ID INNER JOIN      
 TM_MONEDA ON TM_VENTA.MON_ID = TM_MONEDA.MON_ID INNER JOIN      
 TM_CLIENTE ON TM_VENTA.CLI_ID = TM_CLIENTE.CLI_ID INNER JOIN
 TM_DOCUMENTO ON TM_VENTA.DOC_ID = TM_DOCUMENTO.DOC_ID
 WHERE      
 TM_VENTA.EST=1;  
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_ROL_01` (`p_SUC_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_ROL
	WHERE
	SUC_ID = p_SUC_ID
	AND EST=1;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_ROL_02` (`p_ROL_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_ROL
	WHERE
	ROL_ID = p_ROL_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_SUCURSAL_01` (IN `p_EMP_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM tm_sucursal
	WHERE
	emp_id = p_emp_id
	AND est=1;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_SUCURSAL_02` (IN `p_SUC_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM tm_sucursal
	WHERE
	suc_id = p_suc_id;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_UNIDAD_01` (`p_SUC_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_UNIDAD
	WHERE
	SUC_ID = p_SUC_ID
	AND EST=1;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_UNIDAD_02` (`p_UND_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_UNIDAD
	WHERE
	UND_ID = p_UND_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_USUARIO_01` (`p_SUC_ID` INT)   BEGIN    
-- SQLINES LICENSE FOR EVALUATION USE ONLY
SELECT          
TM_USUARIO.USU_ID,   
TM_USUARIO.SUC_ID,   
TM_USUARIO.USU_CORREO,   
TM_USUARIO.USU_NOM,   
TM_USUARIO.USU_APE,   
TM_USUARIO.USU_DNI,   
TM_USUARIO.USU_TELF,   
TM_USUARIO.USU_PASS,  
TM_USUARIO.USU_IMG, 
TM_USUARIO.ROL_ID,   
TM_USUARIO.FECH_CREA,  
TM_ROL.ROL_NOM,   
TM_USUARIO.EST  
FROM              
TM_USUARIO INNER JOIN  
TM_ROL ON TM_USUARIO.ROL_ID = TM_ROL.ROL_ID  
WHERE    
TM_USUARIO.SUC_ID = p_SUC_ID    
AND TM_USUARIO.EST=1;    
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_USUARIO_02` (`p_USU_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_USUARIO
	WHERE
	USU_ID = p_USU_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_USUARIO_03` (`p_USU_CORREO` VARCHAR(150), `p_USU_PASS` VARCHAR(50))   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT * FROM TM_USUARIO
	WHERE
	USU_CORREO = p_USU_CORREO
	AND USU_PASS = p_USU_PASS
	AND EST=1;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_USUARIO_04` (IN `p_SUC_ID` INT, IN `p_USU_CORREO` VARCHAR(50), IN `p_USU_PASS` VARCHAR(30))   BEGIN    
 -- SQLINES LICENSE FOR EVALUATION USE ONLY
 SELECT            
 TM_USUARIO.USU_ID,     
 TM_USUARIO.SUC_ID,     
 TM_USUARIO.USU_CORREO,     
 TM_USUARIO.USU_NOM,     
 TM_USUARIO.USU_APE,     
 TM_USUARIO.USU_DNI,     
 TM_USUARIO.USU_TELF,     
 TM_USUARIO.USU_PASS,     
 TM_USUARIO.ROL_ID,    
 TM_ROL.ROL_NOM,
 TM_USUARIO.USU_IMG, 
 TM_SUCURSAL.EMP_ID,     
 TM_SUCURSAL.SUC_NOM,    
 TM_EMPRESA.EMP_ID,    
 TM_EMPRESA.EMP_NOM,     
 TM_EMPRESA.EMP_RUC,     
 TM_EMPRESA.COM_ID,     
 TM_COMPANIA.COM_NOM    
 FROM      
 TM_USUARIO INNER JOIN    
 TM_SUCURSAL ON TM_USUARIO.SUC_ID = TM_SUCURSAL.SUC_ID INNER JOIN    
 TM_EMPRESA ON TM_SUCURSAL.EMP_ID = TM_EMPRESA.EMP_ID INNER JOIN    
 TM_COMPANIA ON TM_EMPRESA.COM_ID = TM_COMPANIA.COM_ID INNER JOIN    
 TM_ROL ON TM_USUARIO.ROL_ID = TM_ROL.ROL_ID
 WHERE    
 TM_USUARIO.SUC_ID = p_SUC_ID     
 AND TM_USUARIO.USU_CORREO = p_USU_CORREO    
 AND TM_USUARIO.USU_PASS = p_USU_PASS    
 AND TM_USUARIO.EST = 1;    
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_VENTA_01` (IN `p_VENT_ID` INT)   BEGIN
 -- SQLINES LICENSE FOR EVALUATION USE ONLY
 SELECT          
 TD_VENTA_DETALLE.DETV_ID,   
 TM_CATEGORIA.CAT_NOM,   
 TM_PRODUCTO.PROD_NOM,
 TM_PRODUCTO.PROD_IMG,
 TM_UNIDAD.UND_NOM,   
 TD_VENTA_DETALLE.PROD_PVENTA,  
 TD_VENTA_DETALLE.DETV_CANT,   
 TD_VENTA_DETALLE.DETV_DESCUENTO,   
 TD_VENTA_DETALLE.DETV_TOTAL,   
 TD_VENTA_DETALLE.VENT_ID,   
 TD_VENTA_DETALLE.PROD_ID  
 FROM              
 TD_VENTA_DETALLE INNER JOIN  
 TM_PRODUCTO ON TD_VENTA_DETALLE.PROD_ID = TM_PRODUCTO.PROD_ID INNER JOIN  
 TM_CATEGORIA ON TM_PRODUCTO.CAT_ID = TM_CATEGORIA.CAT_ID INNER JOIN  
 TM_UNIDAD ON TM_PRODUCTO.UND_ID = TM_UNIDAD.UND_ID  
 WHERE  
 TD_VENTA_DETALLE.VENT_ID = p_VENT_ID  
 AND TD_VENTA_DETALLE.EST=1;  
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_VENTA_02` (IN `p_VENT_ID` INT)   BEGIN
-- SQLINES LICENSE FOR EVALUATION USE ONLY
SELECT        
  TM_VENTA.VENT_ID, 
  TM_VENTA.SUC_ID, 
  TM_VENTA.PAG_ID, 
  TM_VENTA.CLI_ID, 
  TM_VENTA.CLI_RUC, 
  TM_VENTA.CLI_DIRECC, 
  TM_VENTA.CLI_CORREO, 
  TM_VENTA.VENT_SUBTOTAL, 
  TM_VENTA.VENT_IGV, 
  TM_VENTA.VENT_TOTAL, 
  TM_VENTA.VENT_COMENT, 
  TM_VENTA.USU_ID, 
  TM_VENTA.MON_ID, 
  TM_VENTA.FECH_CREA, 
  TM_VENTA.EST, 
  TM_SUCURSAL.SUC_NOM, 
  TM_EMPRESA.EMP_NOM, 
  TM_EMPRESA.EMP_RUC, 
  TM_EMPRESA.EMP_CORREO, 
  TM_EMPRESA.EMP_TELF, 
  TM_EMPRESA.EMP_DIRECC, 
  TM_EMPRESA.EMP_PAG, 
  TM_COMPANIA.COM_NOM, 
  TM_USUARIO.USU_CORREO, 
  TM_USUARIO.USU_NOM, 
  TM_USUARIO.USU_APE, 
  TM_USUARIO.USU_DNI, 
  TM_USUARIO.USU_TELF, 
  TM_ROL.ROL_NOM, 
  TM_PAGO.PAG_NOM, 
  TM_MONEDA.MON_NOM,
  TM_CLIENTE.CLI_NOM,
  TD_VENTA_DETALLE.DETV_DESCUENTO
FROM            
  TM_VENTA
  INNER JOIN TM_SUCURSAL ON TM_VENTA.SUC_ID = TM_SUCURSAL.SUC_ID
  INNER JOIN TM_EMPRESA ON TM_SUCURSAL.EMP_ID = TM_EMPRESA.EMP_ID
  INNER JOIN TM_COMPANIA ON TM_EMPRESA.COM_ID = TM_COMPANIA.COM_ID
  INNER JOIN TM_USUARIO ON TM_VENTA.USU_ID = TM_USUARIO.USU_ID
  INNER JOIN TM_ROL ON TM_USUARIO.ROL_ID = TM_ROL.ROL_ID
  INNER JOIN TM_PAGO ON TM_VENTA.PAG_ID = TM_PAGO.PAG_ID
  INNER JOIN TM_MONEDA ON TM_VENTA.MON_ID = TM_MONEDA.MON_ID
  INNER JOIN TM_CLIENTE ON TM_VENTA.CLI_ID = TM_CLIENTE.CLI_ID
  INNER JOIN TD_VENTA_DETALLE ON TM_VENTA.VENT_ID = TD_VENTA_DETALLE.VENT_ID
WHERE  
  TM_VENTA.VENT_ID = p_VENT_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_VENTA_03` (`p_SUC_ID` INT)   BEGIN      
 -- SQLINES LICENSE FOR EVALUATION USE ONLY
 SELECT              
 TM_VENTA.VENT_ID,       
 TM_VENTA.SUC_ID,       
 TM_VENTA.PAG_ID,       
 TM_VENTA.CLI_ID,       
 TM_VENTA.CLI_RUC,       
 TM_VENTA.CLI_DIRECC,       
 TM_VENTA.CLI_CORREO,       
 TM_VENTA.VENT_SUBTOTAL,       
 TM_VENTA.VENT_IGV,       
 TM_VENTA.VENT_TOTAL,       
 TM_VENTA.VENT_COMENT,       
 TM_VENTA.USU_ID,       
 TM_VENTA.MON_ID,       
 TM_VENTA.FECH_CREA,       
 TM_VENTA.EST,       
 TM_SUCURSAL.SUC_NOM,       
 TM_EMPRESA.EMP_NOM,       
 TM_EMPRESA.EMP_RUC,       
 TM_EMPRESA.EMP_CORREO,       
 TM_EMPRESA.EMP_TELF,       
 TM_EMPRESA.EMP_DIRECC,       
 TM_EMPRESA.EMP_PAG,       
 TM_COMPANIA.COM_NOM,       
 TM_USUARIO.USU_CORREO,       
 TM_USUARIO.USU_NOM,       
 TM_USUARIO.USU_APE,       
 TM_USUARIO.USU_DNI,       
 TM_USUARIO.USU_TELF,       
 TM_USUARIO.USU_IMG,   
 TM_ROL.ROL_NOM,       
 TM_PAGO.PAG_NOM,       
 TM_MONEDA.MON_NOM,      
 TM_CLIENTE.CLI_NOM,
 TM_DOCUMENTO.DOC_NOM
 FROM                  
 TM_VENTA INNER JOIN      
 TM_SUCURSAL ON TM_VENTA.SUC_ID = TM_SUCURSAL.SUC_ID INNER JOIN      
 TM_EMPRESA ON TM_SUCURSAL.EMP_ID = TM_EMPRESA.EMP_ID INNER JOIN      
 TM_COMPANIA ON TM_EMPRESA.COM_ID = TM_COMPANIA.COM_ID INNER JOIN      
 TM_USUARIO ON TM_VENTA.USU_ID = TM_USUARIO.USU_ID INNER JOIN      
 TM_ROL ON TM_USUARIO.ROL_ID = TM_ROL.ROL_ID INNER JOIN      
 TM_PAGO ON TM_VENTA.PAG_ID = TM_PAGO.PAG_ID INNER JOIN      
 TM_MONEDA ON TM_VENTA.MON_ID = TM_MONEDA.MON_ID INNER JOIN      
 TM_CLIENTE ON TM_VENTA.CLI_ID = TM_CLIENTE.CLI_ID INNER JOIN
 TM_DOCUMENTO ON TM_VENTA.DOC_ID = TM_DOCUMENTO.DOC_ID
 WHERE      
 TM_VENTA.EST=1      
 AND TM_VENTA.SUC_ID = p_SUC_ID;      
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_VENTA_04` (`p_SUC_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT        
 TD_VENTA_DETALLE.PROD_ID, 
	SUM(TD_VENTA_DETALLE.DETV_CANT) AS CANT, 
	TM_PRODUCTO.PROD_NOM, 
	TM_PRODUCTO.PROD_PVENTA, 
	TM_CATEGORIA.CAT_NOM, 
	TM_UNIDAD.UND_NOM, 
	TM_PRODUCTO.PROD_STOCK, 
	TM_PRODUCTO.PROD_IMG,
	TM_MONEDA.MON_NOM,
	SUM(TM_VENTA.VENT_TOTAL) AS TOTAL
	FROM            
	TD_VENTA_DETALLE INNER JOIN
	TM_PRODUCTO ON TD_VENTA_DETALLE.PROD_ID = TM_PRODUCTO.PROD_ID INNER JOIN
	TM_CATEGORIA ON TM_PRODUCTO.CAT_ID = TM_CATEGORIA.CAT_ID INNER JOIN
	TM_UNIDAD ON TM_PRODUCTO.UND_ID = TM_UNIDAD.UND_ID INNER JOIN
	TM_VENTA ON TD_VENTA_DETALLE.VENT_ID = TM_VENTA.VENT_ID INNER JOIN
	TM_MONEDA ON TM_VENTA.MON_ID = TM_MONEDA.MON_ID
	WHERE
	TM_VENTA.EST = 1
	AND TM_PRODUCTO.EST=1
	AND TM_VENTA.SUC_ID = p_SUC_ID
	GROUP BY 
	TD_VENTA_DETALLE.PROD_ID, 
	TM_PRODUCTO.PROD_NOM, 
	TM_PRODUCTO.PROD_PVENTA, 
	TM_CATEGORIA.CAT_NOM, 
	TM_UNIDAD.UND_NOM, 
	TM_PRODUCTO.PROD_STOCK, 
	TM_PRODUCTO.PROD_IMG,
	TM_MONEDA.MON_NOM
	ORDER BY CANT DESC
	LIMIT 5;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_L_VENTA_06` (`p_SUC_ID` INT)   BEGIN
	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT 
	DATE_FORMAT(FECH_CREA,'%d/%m/%Y') AS FECH_CREA,
	SUM(VENT_TOTAL) AS VENT_TOTAL
	FROM TM_VENTA 
	WHERE 
	EST=1
	AND SUC_ID = p_SUC_ID
	GROUP BY 
	DATE_FORMAT(FECH_CREA,'%d/%m/%Y');
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_CAJA_01` (IN `p_caja_id` INT, IN `p_fecha_cierre` DATETIME, IN `p_monto_cierre` DECIMAL(10,2))   BEGIN
  UPDATE caja
  SET fecha_cierre = p_fecha_cierre, monto_cierre = p_monto_cierre
  WHERE caja_id = p_caja_id;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_CAJA_0_1` (IN `p_caja_id` INT, IN `p_fecha_cierre` DATETIME, IN `p_monto_cierre` DECIMAL(10,2))   BEGIN
  UPDATE caja
  SET fecha_cierre = p_fecha_cierre, monto_cierre = p_monto_cierre
  WHERE caja_id = p_caja_id;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_CATEGORIA_01` (`p_CAT_ID` INT, `p_SUC_ID` INT, `p_CAT_NOM` VARCHAR(150))   BEGIN
	UPDATE TM_CATEGORIA
	SET
		SUC_ID = p_SUC_ID,
		CAT_NOM = p_CAT_NOM
	WHERE
		CAT_ID = p_CAT_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_CLIENTE_01` (`p_CLI_ID` INT, `p_CLI_NOM` VARCHAR(150), `p_EMP_ID` INT, `p_CLI_RUC` VARCHAR(150), `p_CLI_TELF` VARCHAR(150), `p_CLI_DIRECC` VARCHAR(150), `p_CLI_CORREO` VARCHAR(100))   BEGIN  
 UPDATE TM_CLIENTE  
 SET  
  CLI_NOM = p_CLI_NOM,  
  EMP_ID = p_EMP_ID,  
  CLI_RUC = p_CLI_RUC,  
  CLI_TELF = p_CLI_TELF,  
  CLI_DIRECC = p_CLI_DIRECC,  
  CLI_CORREO = p_CLI_CORREO  
 WHERE  
  CLI_ID = p_CLI_ID;  
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_COMPANIA_01` (`p_COM_ID` INT, `p_COM_NOM` VARCHAR(150))   BEGIN
	UPDATE TM_COMPANIA
	SET
		COM_NOM = p_COM_NOM
	WHERE
		COM_ID = p_COM_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_COMPRA_01` (`p_COMPR_ID` INT)   BEGIN
	UPDATE TM_COMPRA
	SET
		COMPR_SUBTOTAL = (SELECT SUM(DETC_TOTAL) AS COMPR_SUBTOTAL FROM TD_COMPRA_DETALLE WHERE COMPR_ID=p_COMPR_ID AND EST=1),
		COMPR_IGV = (SELECT SUM(DETC_TOTAL) AS COMPR_SUBTOTAL FROM TD_COMPRA_DETALLE WHERE COMPR_ID=p_COMPR_ID AND EST=1) * 0.13,
		COMPR_TOTAL = (SELECT SUM(DETC_TOTAL) AS COMPR_SUBTOTAL FROM TD_COMPRA_DETALLE WHERE COMPR_ID=p_COMPR_ID AND EST=1) +((SELECT SUM(DETC_TOTAL) AS COMPR_SUBTOTAL FROM TD_COMPRA_DETALLE WHERE COMPR_ID=p_COMPR_ID AND EST=1) * 0.13)
	WHERE
		COMPR_ID = p_COMPR_ID;

	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT 
		COMPR_SUBTOTAL,
		COMPR_IGV,
		COMPR_TOTAL 
	FROM 
		TM_COMPRA
	WHERE
		COMPR_ID = p_COMPR_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_COMPRA_02` (`p_COMPR_ID` INT)   BEGIN
DECLARE NOT_FOUND INT DEFAULT 0;
	DECLARE v_ID_REGISTRO INT;
	DECLARE v_PROD_ID INT;
	DECLARE v_CANT INT;

	DECLARE CUR CURSOR FOR SELECT DETC_ID FROM TD_COMPRA_DETALLE WHERE COMPR_ID=p_COMPR_ID;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET NOT_FOUND = 1;
	OPEN CUR;
	FETCH NEXT FROM CUR INTO v_ID_REGISTRO;
	WHILE NOT_FOUND=0
		DO
			-- SQLINES LICENSE FOR EVALUATION USE ONLY
			SELECT PROD_ID INTO v_PROD_ID FROM TD_COMPRA_DETALLE WHERE DETC_ID = v_ID_REGISTRO;
			
			-- SQLINES LICENSE FOR EVALUATION USE ONLY
			SELECT DETC_CANT INTO v_CANT FROM TD_COMPRA_DETALLE WHERE DETC_ID = v_ID_REGISTRO;

			UPDATE TM_PRODUCTO
			SET
				PROD_STOCK = PROD_STOCK + v_CANT
			WHERE
				PROD_ID = v_PROD_ID;

			FETCH NEXT FROM CUR INTO v_ID_REGISTRO;
		END WHILE;
	CLOSE CUR;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_COMPRA_03` (`p_COMPR_ID` INT, `p_PAG_ID` INT, `p_PROV_ID` INT, `p_PROV_RUC` VARCHAR(20), `p_PROV_DIRECC` VARCHAR(150), `p_PROV_CORREO` VARCHAR(150), `p_COMPR_COMENT` VARCHAR(250), `p_MON_ID` INT, `p_DOC_ID` INT)   BEGIN
 DECLARE v_ID_REGISTRO INT;  
 DECLARE v_PROD_ID INT;  
 DECLARE v_CANT INT;
DECLARE NOT_FOUND INT DEFAULT 0;  

DECLARE CUR CURSOR FOR SELECT DETC_ID FROM TD_COMPRA_DETALLE WHERE COMPR_ID=p_COMPR_ID;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET NOT_FOUND = 1;  

 UPDATE TM_COMPRA  
 SET  
  PAG_ID = p_PAG_ID,  
  PROV_ID = p_PROV_ID,  
  PROV_RUC = p_PROV_RUC,  
  PROV_DIRECC = p_PROV_DIRECC,  
  PROV_CORREO = p_PROV_CORREO,  
  COMPR_COMENT = p_COMPR_COMENT,  
  MON_ID = p_MON_ID,  
  DOC_ID = p_DOC_ID,
  FECH_CREA = NOW(3),  
  EST = 1  
 WHERE  
  COMPR_ID = p_COMPR_ID;  
   
 
 OPEN CUR;  
 FETCH NEXT FROM CUR INTO v_ID_REGISTRO;  
 WHILE NOT_FOUND=0  
  DO  
   -- SQLINES LICENSE FOR EVALUATION USE ONLY
   SELECT PROD_ID INTO v_PROD_ID FROM TD_COMPRA_DETALLE WHERE DETC_ID = v_ID_REGISTRO;  
     
   -- SQLINES LICENSE FOR EVALUATION USE ONLY
   SELECT DETC_CANT INTO v_CANT FROM TD_COMPRA_DETALLE WHERE DETC_ID = v_ID_REGISTRO;  
  
   UPDATE TM_PRODUCTO  
   SET  
    PROD_STOCK = PROD_STOCK + v_CANT  
   WHERE  
    PROD_ID = v_PROD_ID;  
  
   FETCH NEXT FROM CUR INTO v_ID_REGISTRO;  
  END WHILE;  
 CLOSE CUR;  
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_EMPRESA_01` (`p_EMP_ID` INT, `p_COM_ID` INT, `p_EMP_NOM` VARCHAR(150), `p_EMP_RUC` VARCHAR(150))   BEGIN
	UPDATE TM_EMPRESA
	SET
		COM_ID = p_COM_ID,
		EMP_NOM = p_EMP_NOM,
		EMP_RUC = p_EMP_RUC
	WHERE
		EMP_ID = p_EMP_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_MENU_01` (`p_MEND_ID` INT)   BEGIN
	UPDATE TD_MENU
	SET
		MEND_PERMI = 'Si'
	WHERE
		MEND_ID = p_MEND_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_MENU_02` (`p_MEND_ID` INT)   BEGIN
	UPDATE TD_MENU
	SET
		MEND_PERMI = 'No'
	WHERE
		MEND_ID = p_MEND_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_MONEDA_01` (`p_MON_ID` INT, `p_SUC_ID` INT, `p_MON_NOM` VARCHAR(150))   BEGIN
	UPDATE TM_MONEDA
	SET
		SUC_ID = p_SUC_ID,
		MON_NOM = p_MON_NOM
	WHERE
		MON_ID = p_MON_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_PRODUCTO_01` (`p_PROD_ID` INT, `p_SUC_ID` INT, `p_CAT_ID` INT, `p_PROD_NOM` VARCHAR(150), `p_PROD_DESCRIP` VARCHAR(150), `p_UND_ID` INT, `p_MON_ID` INT, `p_PROD_PCOMPRA` NUMERIC(18,2), `p_PROD_PVENTA` NUMERIC(18,2), `p_PROD_STOCK` INT, `p_PROD_FECHAVEN` DATE, `p_PROD_IMG` LONGTEXT)   BEGIN
	UPDATE TM_PRODUCTO
	SET
		SUC_ID = p_SUC_ID,
		CAT_ID = p_CAT_ID,
		PROD_NOM = p_PROD_NOM,
		PROD_DESCRIP = p_PROD_DESCRIP,
		UND_ID = p_UND_ID,
		MON_ID = p_MON_ID,
		PROD_PCOMPRA = p_PROD_PCOMPRA,
		PROD_PVENTA = p_PROD_PVENTA,
		PROD_STOCK = p_PROD_STOCK,
		PROD_FECHAVEN = p_PROD_FECHAVEN,
		PROD_IMG = p_PROD_IMG
	WHERE
		PROD_ID = p_PROD_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_PROVEEDOR_01` (`p_PROV_ID` INT, `p_EMP_ID` INT, `p_PROV_NOM` VARCHAR(150), `p_PROV_RUC` VARCHAR(50), `p_PROV_TELF` VARCHAR(150), `p_PROV_DIRECC` VARCHAR(150), `p_PROV_CORREO` VARCHAR(100))   BEGIN
	UPDATE TM_PROVEEDOR
	SET
		EMP_ID = p_EMP_ID,
		PROV_NOM = p_PROV_NOM,
		PROV_RUC = p_PROV_RUC,
		PROV_TELF = p_PROV_TELF,
		PROV_DIRECC = p_PROV_DIRECC,
		PROV_CORREO = p_PROV_CORREO
	WHERE
		PROV_ID = p_PROV_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_ROL_01` (`p_ROL_ID` INT, `p_SUC_ID` INT, `p_ROL_NOM` VARCHAR(150))   BEGIN
	UPDATE TM_ROL
	SET
		SUC_ID = p_SUC_ID,
		ROL_NOM = p_ROL_NOM
	WHERE
		ROL_ID = p_ROL_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_SUCURSAL_01` (`p_SUC_ID` INT, `p_EMP_ID` INT, `p_SUC_NOM` VARCHAR(150))   BEGIN
	UPDATE TM_SUCURSAL
	SET
		EMP_ID = p_EMP_ID,
		SUC_NOM = p_SUC_NOM
	WHERE
		SUC_ID = p_SUC_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_UNIDAD_01` (`p_UND_ID` INT, `p_SUC_ID` INT, `p_UND_NOM` VARCHAR(150))   BEGIN
	UPDATE TM_UNIDAD
	SET
		SUC_ID = p_SUC_ID,
		UND_NOM = p_UND_NOM
	WHERE
		UND_ID = p_UND_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_USUARIO_01` (`p_USU_ID` INT, `p_SUC_ID` INT, `p_USU_CORREO` VARCHAR(150), `p_USU_NOM` VARCHAR(150), `p_USU_APE` VARCHAR(150), `p_USU_DNI` VARCHAR(150), `p_USU_TELF` VARCHAR(150), `p_USU_PASS` VARCHAR(150), `p_ROL_ID` INT, `p_USU_IMG` LONGTEXT)   BEGIN  
 UPDATE TM_USUARIO  
 SET  
  SUC_ID = p_SUC_ID,  
  USU_CORREO = p_USU_CORREO,  
  USU_NOM = p_USU_NOM,  
  USU_APE = p_USU_APE,  
  USU_DNI = p_USU_DNI,  
  USU_TELF = p_USU_TELF,  
  USU_PASS = p_USU_PASS,  
  ROL_ID = p_ROL_ID,
  USU_IMG = p_USU_IMG
 WHERE  
  USU_ID = p_USU_ID;  
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_USUARIO_02` (`p_USU_ID` INT, `p_USU_PASS` VARCHAR(50))   BEGIN
	UPDATE TM_USUARIO
	SET
		USU_PASS = p_USU_PASS
	WHERE
		USU_ID = p_USU_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_VENTA_01` (IN `p_VENT_ID` INT)   BEGIN
	UPDATE TM_VENTA
	SET
		VENT_SUBTOTAL = (SELECT SUM(DETV_TOTAL) AS VENT_SUBTOTAL FROM TD_VENTA_DETALLE WHERE VENT_ID=p_VENT_ID AND EST=1),
		VENT_IGV = (SELECT SUM(DETV_TOTAL) AS VENT_SUBTOTAL FROM TD_VENTA_DETALLE WHERE VENT_ID=p_VENT_ID AND EST=1) * 0.13,
		VENT_TOTAL = (SELECT SUM(DETV_TOTAL) AS VENT_SUBTOTAL FROM TD_VENTA_DETALLE WHERE VENT_ID=p_VENT_ID AND EST=1) +((SELECT SUM(DETV_TOTAL) AS VENT_SUBTOTAL FROM TD_VENTA_DETALLE WHERE VENT_ID=p_VENT_ID AND EST=1) * 0.13)
	WHERE
		VENT_ID = p_VENT_ID;

	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT 
		VENT_SUBTOTAL,
		VENT_IGV,
		VENT_TOTAL 
	FROM 
		TM_VENTA
	WHERE
		VENT_ID = p_VENT_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_VENTA_01_CALCULO` (IN `p_VENT_ID` INT, IN `p_VENT_DESCUENTO` DECIMAL(18,2))   BEGIN
	DECLARE v_SUBTOTAL DECIMAL(18,2);
	DECLARE v_IGV DECIMAL(18,2);
	DECLARE v_TOTAL DECIMAL(18,2);
	DECLARE v_DESCUENTO DECIMAL(18,2);

	SET v_SUBTOTAL = (SELECT SUM(DETV_TOTAL) AS VENT_SUBTOTAL FROM TD_VENTA_DETALLE WHERE VENT_ID=p_VENT_ID AND EST=1);
	SET v_DESCUENTO = v_SUBTOTAL * (p_VENT_DESCUENTO/100);
	SET v_IGV = v_SUBTOTAL * 0.13;
	SET v_TOTAL = v_SUBTOTAL + v_IGV - v_DESCUENTO;

	UPDATE TM_VENTA
	SET
		VENT_SUBTOTAL = v_SUBTOTAL,
		VENT_IGV = v_IGV,
		VENT_DESCUENTO = v_DESCUENTO,
		VENT_TOTAL = v_TOTAL
	WHERE
		VENT_ID = p_VENT_ID;

	SELECT 
		VENT_SUBTOTAL,
		VENT_IGV,
		VENT_DESCUENTO,
		VENT_TOTAL 
	FROM 
		TM_VENTA
	WHERE
		VENT_ID = p_VENT_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_VENTA_01_PRO` (IN `p_VENT_ID` INT)   BEGIN
	UPDATE TM_VENTA
	SET
		VENT_SUBTOTAL = (SELECT SUM(DETV_TOTAL) AS VENT_SUBTOTAL FROM TD_VENTA_DETALLE WHERE VENT_ID=p_VENT_ID AND EST=1),
		VENT_IGV = (SELECT SUM(DETV_TOTAL) AS VENT_SUBTOTAL FROM TD_VENTA_DETALLE WHERE VENT_ID=p_VENT_ID AND EST=1) * 0.13,
		VENT_TOTAL = (SELECT SUM(DETV_TOTAL) AS VENT_SUBTOTAL FROM TD_VENTA_DETALLE WHERE VENT_ID=p_VENT_ID AND EST=1) +((SELECT SUM(DETV_TOTAL) AS VENT_SUBTOTAL FROM TD_VENTA_DETALLE WHERE VENT_ID=p_VENT_ID AND EST=1) * 0.13),
		DETV_DESCUENTO = IFNULL((SELECT SUM(DETV_DESCUENTO) FROM TD_VENTA_DETALLE WHERE VENT_ID=p_VENT_ID AND EST=1), 0) * (SELECT SUM(DETV_TOTAL) AS VENT_SUBTOTAL FROM TD_VENTA_DETALLE WHERE VENT_ID=p_VENT_ID AND EST=1) / 100


	WHERE
		VENT_ID = p_VENT_ID;

	-- SQLINES LICENSE FOR EVALUATION USE ONLY
	SELECT 
		VENT_SUBTOTAL,
		VENT_IGV,
		VENT_TOTAL,
		DETV_DESCUENTO
	FROM 
		TM_VENTA
	WHERE
		VENT_ID = p_VENT_ID;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_U_VENTA_03` (`p_VENT_ID` INT, `p_PAG_ID` INT, `p_CLI_ID` INT, `p_CLI_RUC` VARCHAR(20), `p_CLI_DIRECC` VARCHAR(150), `p_CLI_CORREO` VARCHAR(150), `p_VENT_COMENT` VARCHAR(250), `p_MON_ID` INT, `p_DOC_ID` INT)   BEGIN
 DECLARE v_ID_REGISTRO INT;    
 DECLARE v_PROD_ID INT;    
 DECLARE v_CANT INT;    
DECLARE NOT_FOUND INT DEFAULT 0;  

 DECLARE CUR CURSOR FOR SELECT DETV_ID FROM TD_VENTA_DETALLE WHERE VENT_ID=p_VENT_ID;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET NOT_FOUND = 1;    
  
 UPDATE TM_VENTA    
 SET    
  PAG_ID = p_PAG_ID,    
  CLI_ID = p_CLI_ID,    
  CLI_RUC = p_CLI_RUC,    
  CLI_DIRECC = p_CLI_DIRECC,    
  CLI_CORREO = p_CLI_CORREO,    
  VENT_COMENT = p_VENT_COMENT,    
  MON_ID = p_MON_ID,
  DOC_ID = p_DOC_ID,
  FECH_CREA = NOW(3),    
  EST = 1    
 WHERE    
  VENT_ID = p_VENT_ID;    
     
 OPEN CUR;    
 FETCH NEXT FROM CUR INTO v_ID_REGISTRO;    
 WHILE NOT_FOUND=0    
  DO    
   -- SQLINES LICENSE FOR EVALUATION USE ONLY
   SELECT PROD_ID INTO v_PROD_ID FROM TD_VENTA_DETALLE WHERE DETV_ID = v_ID_REGISTRO;    
       
   -- SQLINES LICENSE FOR EVALUATION USE ONLY
   SELECT DETV_CANT INTO v_CANT FROM TD_VENTA_DETALLE WHERE DETV_ID = v_ID_REGISTRO;    
    
   UPDATE TM_PRODUCTO    
   SET    
    PROD_STOCK = PROD_STOCK - v_CANT    
   WHERE    
    PROD_ID = v_PROD_ID;    
    
   FETCH NEXT FROM CUR INTO v_ID_REGISTRO;    
  END WHILE;    
 CLOSE CUR;    
END$$

DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `caja`
--

CREATE TABLE `caja` (
  `caja_id` int(11) NOT NULL,
  `id_usuario` int(11) NOT NULL,
  `fecha_apertura` datetime DEFAULT NULL,
  `fecha_cierre` datetime DEFAULT NULL,
  `monto_apertura` decimal(10,2) DEFAULT NULL,
  `monto_cierre` decimal(10,2) DEFAULT NULL,
  `total_ventas` decimal(18,2) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `caja`
--

INSERT INTO `caja` (`caja_id`, `id_usuario`, `fecha_apertura`, `fecha_cierre`, `monto_apertura`, `monto_cierre`, `total_ventas`) VALUES
(10, 0, '2023-06-07 08:08:54', NULL, '100.00', NULL, NULL);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `evento`
--

CREATE TABLE `evento` (
  `id` int(11) NOT NULL,
  `title` varchar(50) NOT NULL,
  `servicio` varchar(150) NOT NULL,
  `start` date NOT NULL,
  `end` date DEFAULT NULL,
  `color` varchar(20) NOT NULL,
  `idcliente` int(11) NOT NULL,
  `productoId` int(11) NOT NULL,
  `direccion` varchar(150) NOT NULL,
  `referencia` varchar(150) NOT NULL,
  `instalacion_coment` varchar(150) NOT NULL,
  `est` int(11) NOT NULL DEFAULT 1,
  `instalacion_completada` tinyint(1) DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `evento`
--

INSERT INTO `evento` (`id`, `title`, `servicio`, `start`, `end`, `color`, `idcliente`, `productoId`, `direccion`, `referencia`, `instalacion_coment`, `est`, `instalacion_completada`) VALUES
(85, 'Instalacion', 'Instalacion de aire 2', '2023-02-07', '2023-05-02', '#1976d2', 12, 5, 'Sm', 'Sm', 'Sm', 1, 1),
(86, 'Insta', 'Instalacion de aire', '2023-05-10', '2023-05-13', '#1976d2', 13, 8, 'SM', 'SM AV', 'LLEGAR ANTES DE LAS 5', 1, 1),
(87, 'airer', 'Instalacion de aire', '2023-08-04', '2023-08-06', '#1976d2', 7, 5, 'sm', 'tu casa', 'nada', 1, 0),
(88, 'ASAS', 'Instalacion de aire', '2023-08-07', '2023-08-07', '#1976d2', 7, 5, 'ASDADS', 'ASDA', 'DSAFSADFDSDSVAFASDFS', 1, 0),
(89, 'EVENTO', 'Manteminieto de aire', '2023-08-11', '2023-08-13', '#ffc107', 12, 6, 'SM', 'TU CASA', 'NADA', 1, 0),
(90, 'mantenimiento', 'Instalacion de aire', '2023-09-25', '2023-09-28', '#1976d2', 7, 5, 'san miguel', 'casa', 'nada', 1, 0),
(91, 'mantenimiento', 'Manteminieto de aire', '2023-10-05', '2023-10-05', '#ffc107', 7, 5, 'Col Las palmeras', 'a la par de la tienda josue', 'despues de las 5', 1, 1),
(92, 'mantenimiento', 'Manteminieto de aire', '2023-10-05', '2023-10-05', '#ffc107', 11, 5, 'col las palmeras', 'a la par de la tienda', 'despues de las 5', 1, 0);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `td_compra_detalle`
--

CREATE TABLE `td_compra_detalle` (
  `DETC_ID` int(11) NOT NULL,
  `COMPR_ID` int(11) DEFAULT NULL,
  `PROD_ID` int(11) DEFAULT NULL,
  `PROD_PCOMPRA` decimal(18,2) DEFAULT NULL,
  `DETC_CANT` int(11) DEFAULT NULL,
  `DETC_TOTAL` decimal(18,2) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `td_compra_detalle`
--

INSERT INTO `td_compra_detalle` (`DETC_ID`, `COMPR_ID`, `PROD_ID`, `PROD_PCOMPRA`, `DETC_CANT`, `DETC_TOTAL`, `FECH_CREA`, `EST`) VALUES
(1, 1, 1, '20.00', 12, '240.00', '2023-04-05 14:06:23.000', 1),
(2, 5, 3, '1.50', 15, '22.50', '2023-04-05 21:40:49.000', 1),
(3, 6, 3, '1.75', 50, '87.50', '2023-04-05 21:54:42.000', 1),
(4, 8, 3, '1.50', 2, '3.00', '2023-04-05 23:59:36.992', 1),
(5, 8, 4, '20.00', 33, '660.00', '2023-04-05 23:59:43.854', 1),
(6, 8, 1, '20.00', 222, '4440.00', '2023-04-05 23:59:50.586', 1),
(7, 10, 5, '500.00', 75, '37500.00', '2023-04-07 15:04:45.407', 0),
(8, 11, 5, '600.00', 50, '30000.00', '2023-04-07 15:05:46.625', 1),
(9, 15, 8, '450.00', 2, '900.00', '2023-04-12 19:15:13.106', 1),
(10, 16, 8, '450.00', 5, '2250.00', '2023-04-12 19:17:15.118', 1),
(11, 20, 7, '500.00', 7, '3500.00', '2023-04-17 07:48:58.728', 1),
(12, 21, 5, '500.00', 10, '5000.00', '2023-04-17 07:50:44.964', 1),
(13, 22, 7, '500.00', 8, '4000.00', '2023-04-17 07:53:55.464', 1),
(14, 24, 6, '1000.00', 8, '8000.00', '2023-04-17 08:01:33.612', 1),
(15, 27, 5, '500.00', 77, '38500.00', '2023-04-17 08:07:53.648', 1),
(16, 29, 7, '500.00', 77, '38500.00', '2023-04-17 08:08:29.844', 1),
(17, 32, 9, '7.00', 4, '28.00', '2023-04-18 10:31:35.916', 1),
(18, 34, 5, '500.00', 90, '45000.00', '2023-04-24 13:49:20.189', 1),
(19, 43, 8, '450.00', 6, '2700.00', '2023-05-08 08:04:08.142', 1),
(20, 47, 5, '500.00', 2, '1000.00', '2023-05-17 07:01:29.119', 1),
(21, 50, 6, '1000.00', 2, '2000.00', '2023-10-05 13:38:20.895', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `td_menu`
--

CREATE TABLE `td_menu` (
  `MEND_ID` int(11) NOT NULL,
  `MEN_ID` int(11) DEFAULT NULL,
  `ROL_ID` int(11) DEFAULT NULL,
  `MEND_PERMI` varchar(2) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `td_menu`
--

INSERT INTO `td_menu` (`MEND_ID`, `MEN_ID`, `ROL_ID`, `MEND_PERMI`, `FECH_CREA`, `EST`) VALUES
(1, 1, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(2, 2, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(3, 3, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(4, 4, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(5, 5, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(6, 6, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(7, 7, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(8, 8, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(9, 9, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(10, 10, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(11, 11, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(12, 12, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(13, 13, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(14, 14, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(15, 15, 1, 'Si', '2023-04-05 11:02:44.000', 1),
(16, 1, 2, 'Si', '2023-04-05 12:37:19.000', 1),
(17, 2, 2, 'Si', '2023-04-05 12:37:19.000', 1),
(18, 3, 2, 'Si', '2023-04-05 12:37:19.000', 1),
(19, 4, 2, 'Si', '2023-04-05 12:37:19.000', 1),
(20, 5, 2, 'Si', '2023-04-05 12:37:19.000', 1),
(21, 6, 2, 'No', '2023-04-05 12:37:19.000', 1),
(22, 7, 2, 'No', '2023-04-05 12:37:19.000', 1),
(23, 8, 2, 'No', '2023-04-05 12:37:19.000', 1),
(24, 9, 2, 'No', '2023-04-05 12:37:19.000', 1),
(25, 10, 2, 'Si', '2023-04-05 12:37:19.000', 1),
(26, 11, 2, 'No', '2023-04-05 12:37:19.000', 1),
(27, 12, 2, 'Si', '2023-04-05 12:37:19.000', 1),
(28, 13, 2, 'Si', '2023-04-05 12:37:19.000', 1),
(29, 14, 2, 'Si', '2023-04-05 12:37:19.000', 1),
(30, 15, 2, 'Si', '2023-04-05 12:37:19.000', 1),
(31, 1, 3, 'No', '2023-04-05 12:37:23.000', 1),
(32, 2, 3, 'No', '2023-04-05 12:37:23.000', 1),
(33, 3, 3, 'No', '2023-04-05 12:37:23.000', 1),
(34, 4, 3, 'No', '2023-04-05 12:37:23.000', 1),
(35, 5, 3, 'No', '2023-04-05 12:37:23.000', 1),
(36, 6, 3, 'No', '2023-04-05 12:37:23.000', 1),
(37, 7, 3, 'No', '2023-04-05 12:37:23.000', 1),
(38, 8, 3, 'No', '2023-04-05 12:37:23.000', 1),
(39, 9, 3, 'No', '2023-04-05 12:37:23.000', 1),
(40, 10, 3, 'No', '2023-04-05 12:37:23.000', 1),
(41, 11, 3, 'No', '2023-04-05 12:37:23.000', 1),
(42, 12, 3, 'No', '2023-04-05 12:37:23.000', 1),
(43, 13, 3, 'No', '2023-04-05 12:37:23.000', 1),
(44, 14, 3, 'No', '2023-04-05 12:37:23.000', 1),
(45, 15, 3, 'No', '2023-04-05 12:37:23.000', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `td_venta_detalle`
--

CREATE TABLE `td_venta_detalle` (
  `DETV_ID` int(11) NOT NULL,
  `VENT_ID` int(11) DEFAULT NULL,
  `PROD_ID` int(11) DEFAULT NULL,
  `PROD_PVENTA` decimal(18,2) DEFAULT NULL,
  `DETV_CANT` int(11) DEFAULT NULL,
  `DETV_DESCUENTO` int(11) DEFAULT NULL,
  `DETV_TOTAL` decimal(18,2) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `td_venta_detalle`
--

INSERT INTO `td_venta_detalle` (`DETV_ID`, `VENT_ID`, `PROD_ID`, `PROD_PVENTA`, `DETV_CANT`, `DETV_DESCUENTO`, `DETV_TOTAL`, `FECH_CREA`, `EST`) VALUES
(86, 133, 8, '525.00', 2, 45, '1050.00', '2023-05-30 21:57:28.805', 1),
(87, 134, 5, '700.00', 2, 200, '1400.00', '2023-05-30 22:05:11.689', 1),
(88, 135, 5, '700.00', 2, 100, '1400.00', '2023-05-30 22:07:41.253', 0),
(89, 140, 6, '2500.00', 5, 10, '12500.00', '2023-05-31 07:13:49.189', 1),
(90, 141, 5, '700.00', 3, 10, '2100.00', '2023-05-31 07:16:25.433', 1),
(91, 142, 8, '525.00', 9, 30, '4725.00', '2023-05-31 07:17:51.980', 1),
(92, 145, 6, '2500.00', 3, 10, '7500.00', '2023-05-31 08:02:38.237', 1),
(93, 146, 5, '700.00', 1, NULL, '700.00', '2023-10-05 08:50:50.472', 1),
(94, 154, 5, '700.00', 80, NULL, '56000.00', '2023-10-05 10:10:08.934', 1),
(95, 156, 5, '700.00', 1, NULL, '700.00', '2023-10-05 10:13:46.594', 1),
(96, 157, 9, '12.00', 1, NULL, '12.00', '2023-10-05 10:17:48.040', 1),
(97, 158, 5, '700.00', 1, NULL, '700.00', '2023-10-05 10:25:13.417', 1),
(98, 159, 5, '700.00', 1, NULL, '700.00', '2023-10-05 10:37:55.371', 1),
(99, 160, 0, '525.00', 1, NULL, '525.00', '2023-10-05 10:42:38.734', 1),
(100, 161, 5, '700.00', 1, NULL, '700.00', '2023-10-05 10:46:06.812', 1),
(101, 162, 5, '700.00', 1, NULL, '700.00', '2023-10-05 10:46:24.265', 1),
(102, 164, 5, '700.00', 1, NULL, '700.00', '2023-10-05 10:52:37.780', 1),
(103, 166, 6, '2500.00', 2, NULL, '5000.00', '2023-10-05 10:55:21.022', 1),
(104, 167, 7, '1500.00', 2, NULL, '3000.00', '2023-10-05 11:00:15.088', 1),
(105, 169, 7, '1500.00', 2, NULL, '3000.00', '2023-10-05 11:02:02.221', 1),
(106, 171, 6, '2500.00', 1, NULL, '2500.00', '2023-10-05 11:29:12.369', 1),
(107, 172, 6, '2500.00', 2, NULL, '5000.00', '2023-10-05 11:29:51.222', 1),
(108, 174, 5, '700.00', 1, NULL, '700.00', '2023-10-05 11:33:36.343', 1),
(109, 175, 6, '2500.00', 1, NULL, '2500.00', '2023-10-05 11:50:15.422', 1),
(110, 177, 6, '2500.00', 1, NULL, '2500.00', '2023-10-05 12:00:11.161', 1),
(111, 179, 6, '2500.00', 2, NULL, '5000.00', '2023-10-05 12:12:52.918', 1),
(112, 180, 7, '1500.00', 1, NULL, '1500.00', '2023-10-05 12:17:45.383', 1),
(113, 181, 6, '2500.00', 2, NULL, '5000.00', '2023-10-05 12:19:38.733', 1),
(114, 182, 8, '525.00', 1, NULL, '525.00', '2023-10-05 12:25:00.695', 1),
(115, 183, 6, '2500.00', 1, NULL, '2500.00', '2023-10-05 12:42:12.918', 1),
(116, 184, 7, '1500.00', 1, NULL, '1500.00', '2023-10-05 12:45:54.615', 1),
(117, 200, 6, '2500.00', 1, NULL, '2500.00', '2023-10-05 13:01:47.560', 1),
(118, 209, 7, '1500.00', 1, NULL, '1500.00', '2023-10-05 13:10:23.252', 1),
(119, 210, 6, '2500.00', 2, NULL, '5000.00', '2023-10-05 13:36:19.321', 1),
(120, 211, 6, '2500.00', 3, NULL, '7500.00', '2023-10-05 15:41:50.402', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_categoria`
--

CREATE TABLE `tm_categoria` (
  `CAT_ID` int(11) NOT NULL,
  `SUC_ID` int(11) DEFAULT NULL,
  `CAT_NOM` varchar(150) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_categoria`
--

INSERT INTO `tm_categoria` (`CAT_ID`, `SUC_ID`, `CAT_NOM`, `FECH_CREA`, `EST`) VALUES
(4, 1, 'Lenoxx', '2023-04-07 14:47:47.193', 1),
(5, 1, 'Conformt', '2023-04-07 14:48:47.446', 1),
(6, 1, 'LG inverter 2023', '2023-04-12 19:04:45.275', 1),
(7, 1, 'Botellas ', '2023-04-18 10:27:28.787', 1),
(8, 1, 'LG inverter ', '2023-08-26 12:53:10.503', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_cliente`
--

CREATE TABLE `tm_cliente` (
  `CLI_ID` int(11) NOT NULL,
  `EMP_ID` int(11) DEFAULT NULL,
  `CLI_NOM` varchar(150) DEFAULT NULL,
  `CLI_RUC` varchar(50) DEFAULT NULL,
  `CLI_TELF` varchar(50) DEFAULT NULL,
  `CLI_DIRECC` varchar(150) DEFAULT NULL,
  `CLI_CORREO` varchar(150) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_cliente`
--

INSERT INTO `tm_cliente` (`CLI_ID`, `EMP_ID`, `CLI_NOM`, `CLI_RUC`, `CLI_TELF`, `CLI_DIRECC`, `CLI_CORREO`, `FECH_CREA`, `EST`) VALUES
(7, 1, 'Antonia', '11111', '76532461', 'Jiquilisco, Usulután', 'antonia@gmail.com', '2023-04-09 00:53:24.336', 0),
(8, 1, 'Carlos', '21212', '76532461', 'Jiquilisco, Usulután', 'carlosmarioc772@gmail.com', '2023-04-09 00:59:00.761', 0),
(9, 1, 'Antonia', '11111', '76532461', 'Jiquilisco, Usulután', 'carlosmarioc772@gmail.com', '2023-04-17 08:21:02.934', 1),
(10, 1, 'carlos garcia', '11231708941023', '75346469', 'el salvador', 'carlosmauricio.garcia@unab.edu.sv', '2023-04-18 10:35:52.151', 1),
(11, 1, 'Pamela', '112234556', '50377398309', 'San  Miguel', 'pamela@gmail.com', '2023-04-24 13:44:55.936', 1),
(12, 1, 'Mercedes Bonilla', '0100010010', '12344567', 'mi casa ', 'mercy@mercy.com', '2023-04-24 16:49:00.218', 0),
(13, 1, 'Natividad', '0000000', '50376532', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '2023-05-03 08:18:58.181', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_compania`
--

CREATE TABLE `tm_compania` (
  `COM_ID` int(11) NOT NULL,
  `COM_NOM` varchar(150) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_compania`
--

INSERT INTO `tm_compania` (`COM_ID`, `COM_NOM`, `FECH_CREA`, `EST`) VALUES
(1, 'Clima Cool', '2023-04-05 10:25:42.000', 1),
(2, 'Clima Cool 2', '2023-04-05 10:25:42.000', 2);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_compra`
--

CREATE TABLE `tm_compra` (
  `COMPR_ID` int(11) NOT NULL,
  `SUC_ID` int(11) DEFAULT NULL,
  `PAG_ID` int(11) DEFAULT NULL,
  `PROV_ID` int(11) DEFAULT NULL,
  `PROV_RUC` varchar(150) DEFAULT NULL,
  `PROV_DIRECC` varchar(150) DEFAULT NULL,
  `PROV_CORREO` varchar(150) DEFAULT NULL,
  `COMPR_SUBTOTAL` decimal(18,2) DEFAULT 0.00,
  `COMPR_IGV` decimal(18,2) DEFAULT 0.00,
  `COMPR_TOTAL` decimal(18,2) DEFAULT 0.00,
  `COMPR_COMENT` varchar(250) DEFAULT NULL,
  `USU_ID` int(11) DEFAULT NULL,
  `MON_ID` int(11) DEFAULT NULL,
  `DOC_ID` int(11) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_compra`
--

INSERT INTO `tm_compra` (`COMPR_ID`, `SUC_ID`, `PAG_ID`, `PROV_ID`, `PROV_RUC`, `PROV_DIRECC`, `PROV_CORREO`, `COMPR_SUBTOTAL`, `COMPR_IGV`, `COMPR_TOTAL`, `COMPR_COMENT`, `USU_ID`, `MON_ID`, `DOC_ID`, `FECH_CREA`, `EST`) VALUES
(1, 1, 2, 1, '12312', 'el salvador', 'carlosmarioc772@gmail.com', '240.00', '31.20', '271.20', 'nada', 6, 1, 1, NULL, 1),
(5, 1, 2, 2, '12312', 'el salvador', 'juancarlos772@gmail.com', '22.50', '2.93', '25.43', 'Comprado por emergencia', 5, 1, 1, NULL, 1),
(6, 1, 1, 2, '12312', 'el salvador', 'juancarlos772@gmail.com', '87.50', '11.38', '98.88', 'nada', 5, 1, 1, NULL, 1),
(7, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 6, NULL, NULL, NULL, 2),
(8, 1, NULL, NULL, NULL, NULL, NULL, '5103.00', '918.54', '6021.54', NULL, 6, NULL, NULL, NULL, 2),
(9, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 1, NULL, NULL, NULL, 2),
(10, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(11, 1, 1, 13, '235698563', 'San Miguel', 'carlosmarioc772@gmail.com', '30000.00', '3900.00', '33900.00', 'esta caro este volado', 1, 1, 1, '2023-04-07 15:06:16.436', 1),
(12, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 1, NULL, NULL, NULL, 2),
(13, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 1, NULL, NULL, NULL, 2),
(14, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 8, NULL, NULL, NULL, 2),
(15, 1, 2, 13, '235698563', 'San Miguel', 'carlosmarioc772@gmail.com', '900.00', '117.00', '1017.00', '', 8, 1, 1, '2023-04-12 19:15:30.087', 1),
(16, 1, 1, 13, '235698563', 'San Miguel', 'carlosmarioc772@gmail.com', '2250.00', '292.50', '2542.50', '', 8, 1, 1, '2023-04-12 19:17:20.007', 1),
(17, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 1, NULL, NULL, NULL, 2),
(18, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(19, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(20, 1, NULL, NULL, NULL, NULL, NULL, '3500.00', '455.00', '3955.00', NULL, 11, NULL, NULL, NULL, 2),
(21, 1, 1, 13, '235698563', 'San Miguel', 'carlosmarioc772@gmail.com', '5000.00', '650.00', '5650.00', 'nada', 11, 1, 1, '2023-04-17 07:50:51.748', 1),
(22, 1, 1, 13, '235698563', 'San Miguel', 'carlosmarioc772@gmail.com', '4000.00', '520.00', '4520.00', 'nadaa', 11, 1, 1, '2023-04-17 07:54:03.065', 1),
(23, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(24, 1, 1, 13, '235698563', 'San Miguel', 'carlosmarioc772@gmail.com', '8000.00', '1040.00', '9040.00', 'erstdr', 11, 1, 1, '2023-04-17 08:01:42.609', 1),
(25, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(26, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(27, 1, 1, 13, '235698563', 'San Miguel', 'carlosmarioc772@gmail.com', '38500.00', '5005.00', '43505.00', '', 11, 1, 1, '2023-04-17 08:07:55.913', 1),
(28, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(29, 1, 1, 13, '235698563', 'San Miguel', 'carlosmarioc772@gmail.com', '38500.00', '5005.00', '43505.00', 'dfsds', 11, 1, 1, '2023-04-17 08:08:33.103', 1),
(30, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(31, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(32, 1, 1, 14, '11231809901037', 'Colonia cujucuyo', 'carlosmarioc772@gmail.com', '28.00', '3.64', '31.64', '', 11, 1, 1, '2023-04-18 10:32:30.645', 1),
(33, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(34, 1, 2, 13, '235698563', 'San Miguel', 'carlosmarioc772@gmail.com', '45000.00', '5850.00', '50850.00', '', 11, 1, 1, '2023-04-24 13:49:53.303', 1),
(35, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(36, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(37, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(38, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(39, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(40, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(41, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(42, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(43, 1, 1, 13, '235698563', 'San Miguel', 'carlosmarioc772@gmail.com', '2700.00', '351.00', '3051.00', 'HOLA', 11, 1, 1, '2023-05-08 08:04:18.044', 1),
(44, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(45, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(46, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(47, 1, 2, 14, '11231809901037', 'Colonia cujucuyo', 'carlosmarioc772@gmail.com', '1000.00', '130.00', '1130.00', '', 11, 1, 1, '2023-05-17 07:01:34.719', 1),
(48, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 11, NULL, NULL, NULL, 2),
(49, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 1, NULL, NULL, NULL, 2),
(50, 1, 1, 14, '11231809901037', 'Colonia cujucuyo', 'carlosmarioc772@gmail.com', '2000.00', '260.00', '2260.00', '', 1, 1, 1, '2023-10-05 13:38:22.785', 1),
(51, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 1, NULL, NULL, NULL, 2),
(52, 1, NULL, NULL, NULL, NULL, NULL, '0.00', '0.00', '0.00', NULL, 1, NULL, NULL, NULL, 2);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_documento`
--

CREATE TABLE `tm_documento` (
  `DOC_ID` int(11) NOT NULL,
  `DOC_NOM` varchar(50) DEFAULT NULL,
  `DOC_TIPO` varchar(150) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_documento`
--

INSERT INTO `tm_documento` (`DOC_ID`, `DOC_NOM`, `DOC_TIPO`, `FECH_CREA`, `EST`) VALUES
(1, 'Factura', 'Compra', '2023-04-05 23:58:39.000', 1),
(2, 'Boleta', 'Compra', '2023-04-05 00:00:00.000', 1),
(3, 'Factura', 'Venta', '2023-01-05 00:00:00.000', 1),
(4, 'Boleta', 'Venta', '2023-01-05 00:00:00.000', 1),
(7, 'Ticket', 'Compra', '2023-01-05 00:00:00.000', 1),
(8, 'Ticket', 'Venta', '2023-01-05 00:00:00.000', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_empresa`
--

CREATE TABLE `tm_empresa` (
  `EMP_ID` int(11) NOT NULL,
  `COM_ID` int(11) DEFAULT NULL,
  `EMP_NOM` varchar(150) DEFAULT NULL,
  `EMP_RUC` varchar(50) DEFAULT NULL,
  `EMP_CORREO` varchar(150) DEFAULT NULL,
  `EMP_TELF` varchar(50) DEFAULT NULL,
  `EMP_DIRECC` varchar(150) DEFAULT NULL,
  `EMP_PAG` varchar(150) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_empresa`
--

INSERT INTO `tm_empresa` (`EMP_ID`, `COM_ID`, `EMP_NOM`, `EMP_RUC`, `EMP_CORREO`, `EMP_TELF`, `EMP_DIRECC`, `EMP_PAG`, `FECH_CREA`, `EST`) VALUES
(1, 1, 'Clima Cool', '1111', 'empresa@empresa.com', '67567575', 'san miguel', '1111', '2023-04-05 10:25:34.000', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_menu`
--

CREATE TABLE `tm_menu` (
  `MEN_ID` int(11) NOT NULL,
  `MEN_NOM` varchar(150) DEFAULT NULL,
  `MEN_RUTA` varchar(250) DEFAULT NULL,
  `MEN_IDENTI` varchar(150) DEFAULT NULL,
  `MEN_GRUPO` varchar(150) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_menu`
--

INSERT INTO `tm_menu` (`MEN_ID`, `MEN_NOM`, `MEN_RUTA`, `MEN_IDENTI`, `MEN_GRUPO`, `FECH_CREA`, `EST`) VALUES
(1, 'Dashboard', '../home/', 'dashboard', 'Dashboard', '2023-04-05 10:58:05.000', 1),
(2, 'Categoria', '../MntCategoria/', 'mntcategoria', 'Mantenimiento', '2023-04-05 10:58:05.000', 1),
(3, 'Inventario', '../MntProducto/', 'mntproducto', 'Mantenimiento', '2023-04-05 10:58:05.000', 1),
(4, 'Cliente', '../MntCliente/', 'mntcliente', 'Mantenimiento', '2023-04-05 10:58:05.000', 1),
(5, 'Proveedor', '../MntProveedor/', 'mntproveedor', 'Mantenimiento', '2023-04-05 10:58:05.000', 1),
(6, 'Moneda', '../MntMoneda/', 'mntmoneda', 'Mantenimiento', '2023-04-05 10:58:05.000', 1),
(7, 'Capacidad Aire', '../MntUndMedida/', 'mntundmedida', 'Mantenimiento', '2023-04-05 10:58:05.000', 1),
(8, 'Empresa', '../MntEmpresa/', 'mntempresa', 'Mantenimiento', '2023-04-05 10:58:05.000', 1),
(9, 'Sucursal', '../MntSucursal/', 'mntsucursal', 'Mantenimiento', '2023-04-05 10:58:05.000', 1),
(10, 'Usuario', '../MntUsuario/', 'mntusuario', 'Mantenimiento', '2023-04-05 10:58:05.000', 1),
(11, 'Rol', '../MntRol/', 'mntrol', 'Mantenimiento', '2023-04-05 10:58:05.000', 1),
(12, 'Nueva Compra', '../MntCompra/', 'mntcompra', 'Compra', '2023-04-05 10:58:05.000', 1),
(13, 'List.Compra', '../ListCompra/', 'listcompra', 'Compra', '2023-04-05 10:58:05.000', 1),
(14, 'Nueva Venta', '../MntVenta', 'mntventa', 'Venta', '2023-04-05 10:58:05.000', 1),
(15, 'List.Venta', '../ListVenta', 'listventa', 'Venta', '2023-04-05 10:58:05.000', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_moneda`
--

CREATE TABLE `tm_moneda` (
  `MON_ID` int(11) NOT NULL,
  `SUC_ID` int(11) DEFAULT NULL,
  `MON_NOM` varchar(50) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_moneda`
--

INSERT INTO `tm_moneda` (`MON_ID`, `SUC_ID`, `MON_NOM`, `FECH_CREA`, `EST`) VALUES
(1, 1, '$ dolar', '2023-04-05 11:27:21.000', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_pago`
--

CREATE TABLE `tm_pago` (
  `PAG_ID` int(11) NOT NULL,
  `PAG_NOM` varchar(150) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_pago`
--

INSERT INTO `tm_pago` (`PAG_ID`, `PAG_NOM`, `FECH_CREA`, `EST`) VALUES
(1, 'Cheque', '2023-04-05 13:07:53.000', 1),
(2, 'Debito', '2023-04-05 13:07:53.000', 1),
(3, 'Efectivo ', '2023-05-04 09:34:47.000', 1),
(4, 'Credito', '2023-05-04 09:34:47.000', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_producto`
--

CREATE TABLE `tm_producto` (
  `PROD_ID` int(11) NOT NULL,
  `SUC_ID` int(11) DEFAULT NULL,
  `CAT_ID` int(11) DEFAULT NULL,
  `PROD_NOM` varchar(150) DEFAULT NULL,
  `PROD_DESCRIP` longtext DEFAULT NULL,
  `UND_ID` int(11) DEFAULT NULL,
  `MON_ID` int(11) DEFAULT NULL,
  `PROD_PCOMPRA` decimal(18,2) DEFAULT NULL,
  `PROD_PVENTA` decimal(18,2) DEFAULT NULL,
  `PROD_STOCK` int(11) DEFAULT NULL,
  `PROD_FECHAVEN` date DEFAULT NULL,
  `PROD_IMG` longtext DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_producto`
--

INSERT INTO `tm_producto` (`PROD_ID`, `SUC_ID`, `CAT_ID`, `PROD_NOM`, `PROD_DESCRIP`, `UND_ID`, `MON_ID`, `PROD_PCOMPRA`, `PROD_PVENTA`, `PROD_STOCK`, `PROD_FECHAVEN`, `PROD_IMG`, `FECH_CREA`, `EST`) VALUES
(5, 1, 4, 'Lennox 4 Pro', 'Este es un aire con algunas cosas', 2, 1, '500.00', '700.00', 0, NULL, '', '2023-04-07 15:01:13.242', 1),
(6, 1, 5, 'Lennox 7 Pro Plus', 'Nada', 3, 1, '1000.00', '2500.00', 24, NULL, '', '2023-04-09 12:24:26.774', 1),
(7, 1, 4, 'Daikin Split Inverter', 'nada', 2, 1, '500.00', '1500.00', 186, NULL, '', '2023-04-09 13:14:46.989', 1),
(8, 1, 6, 'LG Inverter 0102', 'Aire minisplit de 1200 ', 1, 1, '450.00', '525.00', -5, NULL, '', '2023-04-12 19:14:17.707', 1),
(9, 1, 7, 'Tapón rosca rosada', '750 ml', 1, 1, '7.00', '12.00', 5, NULL, '1009168673.png', '2023-04-18 10:29:19.385', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_proveedor`
--

CREATE TABLE `tm_proveedor` (
  `PROV_ID` int(11) NOT NULL,
  `EMP_ID` int(11) DEFAULT NULL,
  `PROV_NOM` varchar(150) DEFAULT NULL,
  `PROV_RUC` varchar(15) DEFAULT NULL,
  `PROV_TELF` varchar(50) DEFAULT NULL,
  `PROV_DIRECC` varchar(150) DEFAULT NULL,
  `PROV_CORREO` varchar(150) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_proveedor`
--

INSERT INTO `tm_proveedor` (`PROV_ID`, `EMP_ID`, `PROV_NOM`, `PROV_RUC`, `PROV_TELF`, `PROV_DIRECC`, `PROV_CORREO`, `FECH_CREA`, `EST`) VALUES
(13, 1, 'Carlos Mario', '235698563', '7653658', 'San Miguel', 'carlosmarioc772@gmail.com', '2023-04-07 15:03:01.775', 1),
(14, 1, 'Jonathan ', '11231809901037', '77710565', 'Colonia cujucuyo', 'carlosmarioc772@gmail.com', '2023-04-18 10:30:53.773', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_rol`
--

CREATE TABLE `tm_rol` (
  `ROL_ID` int(11) NOT NULL,
  `SUC_ID` int(11) DEFAULT NULL,
  `ROL_NOM` varchar(150) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_rol`
--

INSERT INTO `tm_rol` (`ROL_ID`, `SUC_ID`, `ROL_NOM`, `FECH_CREA`, `EST`) VALUES
(1, 1, 'Admin', '2023-04-05 11:08:42.000', 1),
(2, 1, 'Vendedor', '2023-04-05 11:08:42.000', 1),
(3, 1, 'Comprador', '2023-04-05 11:08:42.000', 1),
(4, 2, 'Admin', '2023-04-05 11:08:42.000', 1),
(5, 2, 'Vendedor', '2023-04-05 11:08:42.000', 1),
(6, 2, 'Comprador', '2023-04-05 11:08:42.000', 1),
(7, 3, 'Admin', '2023-04-05 11:08:42.000', 1),
(8, 3, 'Vendedor', '2023-04-05 11:08:42.000', 1),
(9, 3, 'Comprador', '2023-04-05 11:08:42.000', 1),
(10, 4, 'Admin', '2023-04-05 11:08:42.000', 1),
(11, 4, 'Vendedor', '2023-04-05 11:08:42.000', 1),
(12, 4, 'Comprador', '2023-04-05 11:08:42.000', 1),
(13, 5, 'Admin', '2023-04-05 11:08:42.000', 1),
(14, 5, 'Vendedor', '2023-04-05 11:08:42.000', 1),
(15, 5, 'Comprador', '2023-04-05 11:08:42.000', 1),
(16, 6, 'Admin', '2023-04-05 11:08:42.000', 1),
(17, 6, 'Vendedor', '2023-04-05 11:08:42.000', 1),
(18, 6, 'Comprador', '2023-04-05 11:08:42.000', 1),
(19, 7, 'Admin', '2023-04-05 11:08:42.000', 1),
(20, 7, 'Vendedor', '2023-04-05 11:08:42.000', 1),
(21, 7, 'Comprador', '2023-04-05 11:08:42.000', 1),
(22, 8, 'Admin', '2023-04-05 11:08:42.000', 1),
(23, 8, 'Vendedor', '2023-04-05 11:08:42.000', 1),
(24, 8, 'Comprador', '2023-04-05 11:08:42.000', 1),
(25, 9, 'Admin', '2023-04-05 11:08:42.000', 1),
(26, 9, 'Vendedor', '2023-04-05 11:08:42.000', 1),
(27, 9, 'Comprador', '2023-04-05 11:08:42.000', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_sucursal`
--

CREATE TABLE `tm_sucursal` (
  `SUC_ID` int(11) NOT NULL,
  `EMP_ID` int(11) DEFAULT NULL,
  `SUC_NOM` varchar(50) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_sucursal`
--

INSERT INTO `tm_sucursal` (`SUC_ID`, `EMP_ID`, `SUC_NOM`, `FECH_CREA`, `EST`) VALUES
(1, 1, 'Sucursal 1', '2023-04-05 10:27:59.000', 1),
(2, 1, 'Sucursal 2', '2023-04-05 10:27:59.000', 1),
(3, 2, 'Sucursal 3', '2023-04-05 10:27:59.000', 1),
(4, 2, 'Sucursal 4', '2023-04-05 10:27:59.000', 1),
(5, 3, 'Sucursal 5', '2023-04-05 10:27:59.000', 1),
(6, 3, 'Sucursal 6', '2023-04-05 10:27:59.000', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_unidad`
--

CREATE TABLE `tm_unidad` (
  `UND_ID` int(11) NOT NULL,
  `SUC_ID` int(11) DEFAULT NULL,
  `UND_NOM` varchar(150) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_unidad`
--

INSERT INTO `tm_unidad` (`UND_ID`, `SUC_ID`, `UND_NOM`, `FECH_CREA`, `EST`) VALUES
(1, 1, '18000 BTU', '2023-04-05 11:27:32.000', 1),
(2, 1, '15000 BTU', '2023-04-05 21:59:14.000', 1),
(3, 1, '60000 BTU', '2023-04-07 14:54:28.626', 1),
(4, 1, '11 onza blancas', '2023-04-18 12:22:58.601', 1),
(5, 1, 'TERMOS', '2023-04-18 12:25:00.237', 1),
(6, 1, 'lata de acero inoxidable ', '2023-04-18 12:25:19.937', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_usuario`
--

CREATE TABLE `tm_usuario` (
  `USU_ID` int(11) NOT NULL,
  `SUC_ID` int(11) DEFAULT NULL,
  `id_caja` int(11) DEFAULT NULL,
  `USU_CORREO` varchar(150) DEFAULT NULL,
  `USU_NOM` varchar(150) DEFAULT NULL,
  `USU_APE` varchar(150) NOT NULL,
  `USU_DNI` varchar(50) DEFAULT NULL,
  `USU_TELF` varchar(50) DEFAULT NULL,
  `USU_PASS` varchar(50) DEFAULT NULL,
  `ROL_ID` int(11) DEFAULT NULL,
  `USU_IMG` longtext DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_usuario`
--

INSERT INTO `tm_usuario` (`USU_ID`, `SUC_ID`, `id_caja`, `USU_CORREO`, `USU_NOM`, `USU_APE`, `USU_DNI`, `USU_TELF`, `USU_PASS`, `ROL_ID`, `USU_IMG`, `FECH_CREA`, `EST`) VALUES
(1, 1, 10, 'sucursal1@nati.com', 'Natividad', 'Chavez', '1', '76532461', '1234567', 1, NULL, '2023-04-05 10:39:55.000', 1),
(2, 2, 10, 'sucursal2@nati.com', 'Usuario 2', 'Apellido 2', '1', '0', '1234567', 1, '701205338.png', '2023-04-05 10:39:55.000', 1),
(4, 3, 10, 'sucursal3@nati.com', 'Usuario 3', 'Apellido 3', '1', '0', '12345678', 1, '701205338.png', '2023-04-05 10:39:55.000', 1),
(5, 1, 10, 'josenatividadcv@gmail.com', 'José', 'chevez', '1', '75346469', '12345678', 2, '701205338.png', '2023-04-05 11:23:43.000', 1),
(6, 1, 10, 'coderlifesv@gmail.com', 'Natividad', 'Chávez', '1111', '76532461', 'madmax1992', 1, '701205338.png', '2023-04-05 12:38:29.000', 1),
(7, 1, 10, 'test@test.com', 'test', 'test', 'test', '0', 'test', 1, '', '2023-04-07 15:54:42.084', 1),
(8, 1, 10, 'luis.ayala@unab.edu.sv', 'Luis Alexander ', 'Ayala', '02321420-9', '26275900', 'alfaomega', 2, '', '2023-04-12 19:02:29.337', 1),
(11, 1, 10, 'superadmin@super.com', 'Super', 'Admin', '87878978', '76532461', 'superadmin', 1, NULL, '2023-04-15 18:44:09.000', 1),
(12, 2, 10, 'superadmin@super.com', 'Super', 'Admin', '675', '75675', 'superadmin', 1, NULL, '2023-04-15 18:44:09.000', 1),
(13, 1, 10, 'luis.ayala@unab.edu.sv', 'Luis Alexander ', 'Ayala Fernandez', '00000000', '0000000', '1234', 2, '', '2023-05-03 08:13:04.318', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_venta`
--

CREATE TABLE `tm_venta` (
  `VENT_ID` int(11) NOT NULL,
  `SUC_ID` int(11) DEFAULT NULL,
  `PAG_ID` int(11) DEFAULT NULL,
  `CLI_ID` int(11) DEFAULT NULL,
  `CLI_RUC` varchar(20) DEFAULT NULL,
  `CLI_DIRECC` varchar(250) DEFAULT NULL,
  `CLI_CORREO` varchar(150) DEFAULT NULL,
  `VENT_SUBTOTAL` decimal(18,2) DEFAULT NULL,
  `VENT_IGV` decimal(18,2) DEFAULT NULL,
  `VENT_TOTAL` decimal(18,2) DEFAULT NULL,
  `DETV_DESCUENTO` decimal(18,2) DEFAULT NULL,
  `VENT_COMENT` varchar(250) DEFAULT NULL,
  `USU_ID` int(11) DEFAULT NULL,
  `MON_ID` int(11) DEFAULT NULL,
  `DOC_ID` int(11) DEFAULT NULL,
  `FECH_CREA` datetime(3) DEFAULT NULL,
  `EST` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_venta`
--

INSERT INTO `tm_venta` (`VENT_ID`, `SUC_ID`, `PAG_ID`, `CLI_ID`, `CLI_RUC`, `CLI_DIRECC`, `CLI_CORREO`, `VENT_SUBTOTAL`, `VENT_IGV`, `VENT_TOTAL`, `DETV_DESCUENTO`, `VENT_COMENT`, `USU_ID`, `MON_ID`, `DOC_ID`, `FECH_CREA`, `EST`) VALUES
(132, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(133, 1, NULL, NULL, NULL, NULL, NULL, '1050.00', '136.50', '1186.50', '45.00', NULL, 1, NULL, NULL, NULL, 2),
(134, 1, NULL, NULL, NULL, NULL, NULL, '1400.00', '182.00', '1582.00', '200.00', NULL, 1, NULL, NULL, NULL, 2),
(135, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '0.00', NULL, 1, NULL, NULL, NULL, 2),
(136, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(137, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(138, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(139, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(140, 1, NULL, NULL, NULL, NULL, NULL, '12500.00', '1625.00', '14125.00', '10.00', NULL, 1, NULL, NULL, NULL, 2),
(141, 1, NULL, NULL, NULL, NULL, NULL, '2100.00', '273.00', '2373.00', '10.00', NULL, 1, NULL, NULL, NULL, 2),
(142, 1, 2, 11, '112234556', 'San  Miguel', 'pamela@gmail.com', '4725.00', '614.25', '5339.25', '1601.78', '', 1, 1, 3, '2023-05-31 07:18:42.475', 1),
(143, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(144, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(145, 1, 2, 10, '11231708941023', 'el salvador', 'carlosmarioc772@gmail.com', '7500.00', '975.00', '8475.00', '750.00', '', 1, 1, 4, '2023-05-31 08:05:23.632', 1),
(146, 1, 3, 9, '11111', 'Jiquilisco, Usulután', 'carlosmarioc772@gmail.com', '700.00', '91.00', '791.00', NULL, '', 1, 1, 3, '2023-10-05 08:53:06.272', 1),
(147, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(148, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(149, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(150, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(151, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(152, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(153, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(154, 1, 3, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '56000.00', '7280.00', '63280.00', NULL, '', 1, 1, 3, '2023-10-05 10:10:11.968', 1),
(155, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(156, 1, 1, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '700.00', '91.00', '791.00', NULL, '', 1, 1, 3, '2023-10-05 10:14:53.716', 1),
(157, 1, 4, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '12.00', '1.56', '13.56', NULL, '', 1, 1, 8, '2023-10-05 10:22:01.344', 1),
(158, 1, 1, 9, '11111', 'Jiquilisco, Usulután', 'carlosmarioc772@gmail.com', '700.00', '91.00', '791.00', NULL, '', 1, 1, 3, '2023-10-05 10:26:39.304', 1),
(159, 1, 1, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '700.00', '91.00', '791.00', NULL, '', 1, 1, 3, '2023-10-05 10:37:59.774', 1),
(160, 1, 2, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '525.00', '68.25', '593.25', NULL, '', 1, 1, 3, '2023-10-05 10:42:40.409', 1),
(161, 1, NULL, NULL, NULL, NULL, NULL, '700.00', '91.00', '791.00', NULL, NULL, 1, NULL, NULL, NULL, 2),
(162, 1, 1, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '700.00', '91.00', '791.00', NULL, '', 1, 1, 3, '2023-10-05 10:47:13.867', 1),
(163, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(164, 1, 1, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '700.00', '91.00', '791.00', NULL, '', 1, 1, 3, '2023-10-05 10:54:16.628', 1),
(165, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(166, 1, 1, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '5000.00', '650.00', '5650.00', NULL, '', 1, 1, 3, '2023-10-05 10:55:22.917', 1),
(167, 1, 2, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '3000.00', '390.00', '3390.00', NULL, '', 1, 1, 3, '2023-10-05 11:00:22.681', 1),
(168, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(169, 1, 2, 10, '11231708941023', 'el salvador', 'carlosmarioc772@gmail.com', '3000.00', '390.00', '3390.00', NULL, '', 1, 1, 3, '2023-10-05 11:14:37.854', 1),
(170, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(171, 1, NULL, NULL, NULL, NULL, NULL, '2500.00', '325.00', '2825.00', NULL, NULL, 1, NULL, NULL, NULL, 2),
(172, 1, 1, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '5000.00', '650.00', '5650.00', NULL, '', 1, 1, 3, '2023-10-05 11:32:56.070', 1),
(173, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(174, 1, 1, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '700.00', '91.00', '791.00', NULL, '', 1, 1, 3, '2023-10-05 11:33:38.603', 1),
(175, 1, 2, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '2500.00', '325.00', '2825.00', NULL, '', 1, 1, 3, '2023-10-05 11:54:49.482', 1),
(176, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(177, 1, 2, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '2500.00', '325.00', '2825.00', NULL, '', 1, 1, 3, '2023-10-05 12:11:24.582', 1),
(178, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(179, 1, 1, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '5000.00', '650.00', '5650.00', NULL, '', 1, 1, 3, '2023-10-05 12:17:11.085', 1),
(180, 1, 1, 9, '11111', 'Jiquilisco, Usulután', 'carlosmarioc772@gmail.com', '1500.00', '195.00', '1695.00', NULL, '', 1, 1, 3, '2023-10-05 12:18:26.881', 1),
(181, 1, 3, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '5000.00', '650.00', '5650.00', NULL, '', 1, 1, 3, '2023-10-05 12:24:01.170', 1),
(182, 1, 2, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '525.00', '68.25', '593.25', NULL, '', 1, 1, 3, '2023-10-05 12:33:49.549', 1),
(183, 1, 1, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '2500.00', '325.00', '2825.00', NULL, '', 1, 1, 3, '2023-10-05 12:42:24.442', 1),
(184, 1, 1, 11, '112234556', 'San  Miguel', 'pamela@gmail.com', '1500.00', '195.00', '1695.00', NULL, '', 1, 1, 3, '2023-10-05 12:47:46.063', 1),
(185, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(186, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(187, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(188, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(189, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(190, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(191, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(192, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(193, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(194, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(195, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(196, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(197, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(198, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(199, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(200, 1, 1, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '2500.00', '325.00', '2825.00', NULL, '', 1, 1, 3, '2023-10-05 13:02:17.075', 1),
(201, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(202, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(203, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(204, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(205, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(206, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(207, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(208, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2),
(209, 1, 1, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '1500.00', '195.00', '1695.00', NULL, '', 1, 1, 3, '2023-10-05 13:21:59.971', 1),
(210, 1, 3, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '5000.00', '650.00', '5650.00', NULL, '', 1, 1, 3, '2023-10-05 13:36:47.767', 1),
(211, 1, 3, 13, '0000000', 'Jiquilisco, Usulután', 'cv0195042019@unab.edu.sv', '7500.00', '975.00', '8475.00', NULL, '', 1, 1, 3, '2023-10-05 15:42:43.572', 1),
(212, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, 2);

--
-- Índices para tablas volcadas
--

--
-- Indices de la tabla `caja`
--
ALTER TABLE `caja`
  ADD PRIMARY KEY (`caja_id`);

--
-- Indices de la tabla `evento`
--
ALTER TABLE `evento`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idcliente` (`idcliente`),
  ADD KEY `productoId` (`productoId`);

--
-- Indices de la tabla `td_compra_detalle`
--
ALTER TABLE `td_compra_detalle`
  ADD PRIMARY KEY (`DETC_ID`);

--
-- Indices de la tabla `td_menu`
--
ALTER TABLE `td_menu`
  ADD PRIMARY KEY (`MEND_ID`);

--
-- Indices de la tabla `td_venta_detalle`
--
ALTER TABLE `td_venta_detalle`
  ADD PRIMARY KEY (`DETV_ID`);

--
-- Indices de la tabla `tm_categoria`
--
ALTER TABLE `tm_categoria`
  ADD PRIMARY KEY (`CAT_ID`);

--
-- Indices de la tabla `tm_cliente`
--
ALTER TABLE `tm_cliente`
  ADD PRIMARY KEY (`CLI_ID`);

--
-- Indices de la tabla `tm_compania`
--
ALTER TABLE `tm_compania`
  ADD PRIMARY KEY (`COM_ID`);

--
-- Indices de la tabla `tm_compra`
--
ALTER TABLE `tm_compra`
  ADD PRIMARY KEY (`COMPR_ID`);

--
-- Indices de la tabla `tm_documento`
--
ALTER TABLE `tm_documento`
  ADD PRIMARY KEY (`DOC_ID`);

--
-- Indices de la tabla `tm_empresa`
--
ALTER TABLE `tm_empresa`
  ADD PRIMARY KEY (`EMP_ID`),
  ADD KEY `FK_TM_EMPRESA_TM_COMPANIA` (`COM_ID`);

--
-- Indices de la tabla `tm_menu`
--
ALTER TABLE `tm_menu`
  ADD PRIMARY KEY (`MEN_ID`);

--
-- Indices de la tabla `tm_moneda`
--
ALTER TABLE `tm_moneda`
  ADD PRIMARY KEY (`MON_ID`);

--
-- Indices de la tabla `tm_pago`
--
ALTER TABLE `tm_pago`
  ADD PRIMARY KEY (`PAG_ID`);

--
-- Indices de la tabla `tm_producto`
--
ALTER TABLE `tm_producto`
  ADD PRIMARY KEY (`PROD_ID`);

--
-- Indices de la tabla `tm_proveedor`
--
ALTER TABLE `tm_proveedor`
  ADD PRIMARY KEY (`PROV_ID`);

--
-- Indices de la tabla `tm_rol`
--
ALTER TABLE `tm_rol`
  ADD PRIMARY KEY (`ROL_ID`);

--
-- Indices de la tabla `tm_sucursal`
--
ALTER TABLE `tm_sucursal`
  ADD PRIMARY KEY (`SUC_ID`);

--
-- Indices de la tabla `tm_unidad`
--
ALTER TABLE `tm_unidad`
  ADD PRIMARY KEY (`UND_ID`);

--
-- Indices de la tabla `tm_usuario`
--
ALTER TABLE `tm_usuario`
  ADD PRIMARY KEY (`USU_ID`),
  ADD KEY `id_caja` (`id_caja`);

--
-- Indices de la tabla `tm_venta`
--
ALTER TABLE `tm_venta`
  ADD PRIMARY KEY (`VENT_ID`);

--
-- AUTO_INCREMENT de las tablas volcadas
--

--
-- AUTO_INCREMENT de la tabla `caja`
--
ALTER TABLE `caja`
  MODIFY `caja_id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=11;

--
-- AUTO_INCREMENT de la tabla `evento`
--
ALTER TABLE `evento`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=93;

--
-- AUTO_INCREMENT de la tabla `td_compra_detalle`
--
ALTER TABLE `td_compra_detalle`
  MODIFY `DETC_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=22;

--
-- AUTO_INCREMENT de la tabla `td_menu`
--
ALTER TABLE `td_menu`
  MODIFY `MEND_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=46;

--
-- AUTO_INCREMENT de la tabla `td_venta_detalle`
--
ALTER TABLE `td_venta_detalle`
  MODIFY `DETV_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=121;

--
-- AUTO_INCREMENT de la tabla `tm_categoria`
--
ALTER TABLE `tm_categoria`
  MODIFY `CAT_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=9;

--
-- AUTO_INCREMENT de la tabla `tm_cliente`
--
ALTER TABLE `tm_cliente`
  MODIFY `CLI_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=14;

--
-- AUTO_INCREMENT de la tabla `tm_compania`
--
ALTER TABLE `tm_compania`
  MODIFY `COM_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=3;

--
-- AUTO_INCREMENT de la tabla `tm_compra`
--
ALTER TABLE `tm_compra`
  MODIFY `COMPR_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=53;

--
-- AUTO_INCREMENT de la tabla `tm_documento`
--
ALTER TABLE `tm_documento`
  MODIFY `DOC_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=9;

--
-- AUTO_INCREMENT de la tabla `tm_empresa`
--
ALTER TABLE `tm_empresa`
  MODIFY `EMP_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;

--
-- AUTO_INCREMENT de la tabla `tm_menu`
--
ALTER TABLE `tm_menu`
  MODIFY `MEN_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=16;

--
-- AUTO_INCREMENT de la tabla `tm_moneda`
--
ALTER TABLE `tm_moneda`
  MODIFY `MON_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT de la tabla `tm_pago`
--
ALTER TABLE `tm_pago`
  MODIFY `PAG_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=5;

--
-- AUTO_INCREMENT de la tabla `tm_producto`
--
ALTER TABLE `tm_producto`
  MODIFY `PROD_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=10;

--
-- AUTO_INCREMENT de la tabla `tm_proveedor`
--
ALTER TABLE `tm_proveedor`
  MODIFY `PROV_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=15;

--
-- AUTO_INCREMENT de la tabla `tm_rol`
--
ALTER TABLE `tm_rol`
  MODIFY `ROL_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=28;

--
-- AUTO_INCREMENT de la tabla `tm_sucursal`
--
ALTER TABLE `tm_sucursal`
  MODIFY `SUC_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;

--
-- AUTO_INCREMENT de la tabla `tm_unidad`
--
ALTER TABLE `tm_unidad`
  MODIFY `UND_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;

--
-- AUTO_INCREMENT de la tabla `tm_usuario`
--
ALTER TABLE `tm_usuario`
  MODIFY `USU_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=14;

--
-- AUTO_INCREMENT de la tabla `tm_venta`
--
ALTER TABLE `tm_venta`
  MODIFY `VENT_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=213;

--
-- Restricciones para tablas volcadas
--

--
-- Filtros para la tabla `evento`
--
ALTER TABLE `evento`
  ADD CONSTRAINT `evento_ibfk_1` FOREIGN KEY (`idcliente`) REFERENCES `tm_cliente` (`CLI_ID`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `evento_ibfk_2` FOREIGN KEY (`productoId`) REFERENCES `tm_producto` (`PROD_ID`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Filtros para la tabla `tm_empresa`
--
ALTER TABLE `tm_empresa`
  ADD CONSTRAINT `FK_TM_EMPRESA_TM_COMPANIA` FOREIGN KEY (`COM_ID`) REFERENCES `tm_compania` (`COM_ID`);

--
-- Filtros para la tabla `tm_usuario`
--
ALTER TABLE `tm_usuario`
  ADD CONSTRAINT `tm_usuario_ibfk_1` FOREIGN KEY (`id_caja`) REFERENCES `caja` (`caja_id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
